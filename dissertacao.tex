%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Ultimas modificacoes, 06/02/2012 - Alexandre Duarte 
%% Baseado no modelo latex de Isaac Maia (COPIN/UFCG)
%%
%% Para utilizar ese modelo sao necessarios os seguintes arquivos:
%%
%% ppgi.cls
%% ppgi.sty
%% mestre.sty
%%
%%
%% Mais detalhes sobre normas ABNT no latex, consultar http://abntex.codigolivre.org.br
%% Wiki interessante com dicas uteis sobre latex : http://www.tex-br.org
%%
%%
%% Para compilar esse arquivo, e' sempre importante fazer duas passagens com latex
%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[a4paper,titlepage]{ppgi}\usepackage[]{graphicx}\usepackage[]{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usepackage[portuguese,ruled,linesnumbered]{algorithm2e}
\usepackage[english,portuges]{babel}
\usepackage{ppgi,mestre,epsfig}
\usepackage{times}
\usepackage[final]{pdfpages}
\usepackage{hyperref}
\hypersetup{
    bookmarks=true,   
    pdftitle={Um modelo para detec{\c{c}}{\~{a}}o das mudan{\c{c}}as de posicionamento dos
deputados federais},
    pdfauthor={Vitor M{\'{a}}rcio Paiva de Sousa Baptista}, 
    pdfsubject={},
    pdfkeywords={An{\'{a}}lise legislativa, Ci{\^{e}}ncia pol{\'{i}}tica,
Ci{\^{e}}ncia de dados, Modelos preditivos, Aprendizagem de m{\'{a}}quina}, 
    colorlinks=true,
    linkcolor=black,
    citecolor=black,
    filecolor=black,
    urlcolor=black
 }

% Corrige bug no algorithm2e que usa termos em espanhol ao invés de português
\SetKwFor{Para}{para}{fa\c{c}a}{fim para}
\SetKwFor{ParaPar}{para}{fa\c{c}a em paralelo}{fim para}
\SetKwFor{ParaCada}{para cada}{fa\c{c}a}{fim para cada}
\SetKwFor{ParaTodo}{para todo}{fa\c{c}a}{fim para todo}

%-------------------------- Para usar acentuacaoo em sistemas ISO8859-1 ------------------------------------
% Se estiver usando o Microsoft Windows ou linux com essa codificacao, descomente essas linhas abaixo
% e comente as linhas referentes ao UTF8
%\usepackage[applemac]{inputenc} % Usar acentuacao em sistemas ISO8859-1, comentar a linha com  \usepackage[utf8x {inputenc}
%-----------------------------------------------------------------------------------------------------

%-------------------------- Para usar acentuacao em sistemas UTF8 ------------------------------------
% Para a maior parte das distribuicoes linux, usar essa opcao
\usepackage{ucs}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
%-----------------------------------------------------------------------------------------------------
\usepackage{nameref} % Cria referências pelo nome
\usepackage{float}      
\usepackage{fancyvrb}
\usepackage{fancyheadings}
\usepackage{tikz} % Permite usar math mode dentro dos gráficos do knitr
\usepackage{graphicx}
\graphicspath{{figure/}}
\setkeys{Gin}{width=0.5\textwidth}
\usepackage{longtable} %tabelas longas, para tabelas que ultrapassam uma pagina
\usepackage{pdflscape} % landscape figures
\usepackage[nonumberlist,nopostdot]{glossaries} % Remove lista de páginas do glossário
\usepackage[skip=0pt]{caption} % Diminui distância entre imagens/tabelas e seus captions
\usepackage{subcaption}
\usepackage{epigraph}
\newcommand{\subfloat}[2][need a sub-caption]{\subcaptionbox{#1}{#2}}

\makeglossaries
\newacronym{IR}{IR}{\'indice de Rice}
\newacronym{PT}{PT}{Partido dos Trabalhadores}
\newacronym{PSOL}{PSOL}{Partido Socialismo e Liberdade}
\newacronym{API}{API}{\emph{Application Programming Interface}}
\newacronym{XML}{XML}{\emph{eXtensible Markup Language}}
\newacronym{CSV}{CSV}{\emph{Comma Separated Values}}
\newacronym{JSON}{JSON}{\emph{JavaScript Object Notation}}
\newacronym{CEBRAP}{CEBRAP}{Centro Brasileiro de An\'alise e Pesquisa}
\newacronym{ELLO}{ELLO}{Estudos Legislativos e An\'alise Pol\'itica}
\newacronym{ROC}{ROC}{\emph{Receiver Operating Characteristic}}
\newacronym{AUC}{AUC}{\'area sob a curva ROC}
\newacronym{GLM}{GLM}{Modelo Linear Generalizado}
\newacronym{SVM}{SVM}{\emph{Support Vector Machine}}
\newacronym{RF}{RF}{\emph{Random Forest}}
\newacronym{GBM}{GBM}{\emph{Stochastic Gradient Boosting}}
\newacronym{NNET}{NNET}{rede neural}
\newacronym{ACP}{ACP}{An\'{a}lise de Componentes Principais}
\newacronym{MCA}{MCA}{\emph{Multiple Correspondence Analysis}}

%\input{psfig.sty}
% ----------------- Para inserir codigo fonte de linguagens de programacao no documento -------------
\usepackage{listings}
\lstset{numbers=left,
stepnumber=1,
firstnumber=1,
numberstyle=\scriptsize,
extendedchars=true,
breaklines=true,
frame=tb,
basicstyle=\scriptsize,
stringstyle=\ttfamily,
showstringspaces=false
}
\renewcommand{\lstlistingname}{C\'odigo Fonte}
\renewcommand{\lstlistlistingname}{Lista de C\'odigos Fonte}

% Configura estilo da epígrafe
\setlength{\epigraphrule}{0pt}
\setlength{\epigraphwidth}{.8\textwidth}
% ---------------------------------------------------------------------------------------------------

\selectlanguage{portuges}
\sloppy

\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}
\usepackage{abnt-alf}

% Centraliza todos os floats
\makeatletter
\g@addto@macro\@floatboxreset\centering
\makeatother
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Titulo{Um modelo para a detecção das mudanças de posicionamento dos deputados federais}
\Autor{Vitor Márcio Paiva de Sousa Baptista}
\Data{27 de agosto de 2015}
\Area{Ciência da Computação}
\Pesquisa{Computação Distribuída | Sinais, Sistemas Digitais e Gráficos}
\Orientadores{Alexandre Nóbrega Duarte\\ (Orientador)}

\newpage
\cleardoublepage
\PaginadeRosto

\newpage
\cleardoublepage

\newpage
\cleardoublepage
\pagestyle{empty}
\input{licenca.tex}
\newpage
\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{resumo} 
\input{resumo.tex}
\end{resumo}
%\newpage
%\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{summary}
\input{abstract.tex}
\end{summary}

%\newpage
%\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TMP: Agradecimentos
\begin{agradecimentos}
\input{agradecimentos.tex}
\end{agradecimentos}

\clearpage

\newpage
\cleardoublepage
\input{epigrafe.tex}
\newpage
\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Definicao do cabecalho: secao do lado esquerdo e numero da pagina do lado direito
\pagestyle{fancy}
\addtolength{\headwidth}{\marginparsep}\addtolength{\headwidth}{\marginparwidth}\headwidth = \textwidth
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}\lhead[\fancyplain{}{\bfseries\thepage}]%
	     {\fancyplain{}{\emph{\rightmark}}}\rhead[\fancyplain{}{\bfseries\leftmark}]%
             {\fancyplain{}{\bfseries\thepage}}\cfoot{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\Sumario
\ListadeSiglas
\printglossary[title=Lista de Siglas]
\listoffigures
\listoftables

\newpage
\cleardoublepage
\Introducao


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Hifenizacao - Colocar lista de palavras que nao devem ser separadas e que 
% nao estao no dicionario portuges.
% As palavras do dicionario portuges ja sao separadas corretamente pelo lateX
%
\hyphenation{ gLite OurGrid GridDoctor }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% A partir daqui coloque seus capitulos. Sugere-se que eles sejam inseridos com o comando \input
%% Da seguinte maneira:
%% 



\input{01-introducao}

\chapter{Fundamentação Teórica}\label{cap:fundamentacao}

Neste capítulo, serão abordados os conceitos necessários para compreensão do
restante do trabalho. Na Seção \ref{cap:fundamentacao:ciencia-de-dados},
explicarei o que é ciência de dados, descrevendo também o processo de
desenvolvimento e avaliação de modelos preditivos, com foco em modelos de
classificação. Na Seção \ref{cap:fundamentacao:teoria-espacial-do-voto},
falarei brevemente sobre a teoria espacial do voto e a técnica W-NOMINATE para
estimativa de pontos ideais. Por fim, na Seção
\ref{cap:fundamentacao:processo-legislativo}, descreverei em linhas gerais o
processo legislativo brasileiro em nível federal, com ênfase nos tipos de
votação.

\section{Ciência de Dados}
\label{cap:fundamentacao:ciencia-de-dados}

Segundo \citeonline{Stanton2012}, o termo Ciência de Dados (do inglês
\emph{Data Science}) é usado para definir uma área emergente que se ocupa da
coleta, preparo, análise, visualização, gestão e preservação de conjuntos de
dados com o objetivo de extrair conhecimento. Ela usa a ciência da computação
como ferramenta para extrair modelos estatísticos a partir de dados relativos a
uma área fim, como a ciência política.

Por ser uma área interdisciplinar e relativamente recente (especialmente no
Brasil) a distinção do que é ciência de dados e não estatística, matemática ou
computação pode ainda não ser muito clara \cite{Porto2014}. Para facilitar essa
diferenciação, \citeonline{Conway2013} criou o diagrama de Venn da Figura
\ref{fig:ciencia-de-dados-venn} que mostra onde está a ciência de dados em
relação às outras áreas. Nela, vemos que a ciência de dados está na intersecção
entre computação, estatística e uma área fim (por exemplo, ciência política). A
pesquisa tradicional, segundo ele, estaria na intersecção da estatística com a
área fim, enquanto a pesquisa de aprendizagem de máquina estaria na intersecção
de estatística com computação. Ele define a área entre ciência da computação e
a área fim como sendo perigosa, pois apesar do pesquisador ter o ferramental
para desenvolver sua análise, ele corre o risco de errar na interpretação por
não entender as características e limites das ferramentas estatísticas usadas.

\begin{figure}[h]
\includegraphics{ciencia-de-dados-diagrama-venn}
\caption{Diagrama de Venn mostrando as habilidades necessárias para um
cientista de dados \cite{Conway2013}.}
\label{fig:ciencia-de-dados-venn}
\end{figure}

Com as técnicas da ciência de dados, podemos responder perguntas como ``Qual a
melhor rota para chegar até meu trabalho?'', ``Vai chover hoje?'', ``Quais são
minhas chances de desenvolver câncer nos próximos 10 anos?''. Neste trabalho,
estamos interessados nas técnicas de desenvolvimento de modelos preditivos que,
baseados nos dados e conhecimento que temos do assunto, determinam a
probabilidade de um resultado.

\subsection{Modelos preditivos}

\citeonline{Geisser1993} define modelagem preditiva como sendo ``o processo
pelo qual um modelo é criado ou escolhido para tentar melhor prever a
probabilidade de um resultado''. Já \citeonline{Kuhn2013} definem como ``o
processo de desenvolvimento de uma ferramenta ou modelo matemático que gere uma
previsão precisa''.

Modelos preditivos fazem parte do dia a dia da sociedade atual. O Google os
utiliza para interpretar o que seus usuários estão buscando; o Netflix usa para
recomendar filmes; corretoras de valores usam para definir que ações comprar ou
vender; seguradoras usam para definir qual o risco e, consequentemente, o preço
do seguro de um carro, entre outros \cite{Levy2010}.

Existem duas principais categorias de problemas que podem ser resolvidos por
modelos preditivos: regressão e classificação. A diferença entre eles está no
tipo de resposta que queremos prever, se é contínua ou categórica, o que
influencia nos tipos de modelos que podem ser usados e na forma de avaliá-los.
Por exemplo, ao analisarmos modelos que preveem o preço de um imóvel a partir
da sua área, buscamos o que chegue mais próximo do valor real\footnote{Esta é
uma simplificação. Existem diversas outras características a serem analisadas
ao escolher um modelo, como facilidade de interpretação, velocidade de
execução, entre outras. Aqui consideramos que a única diferença entre os
modelos seja o resultado previsto.}. Já ao avaliar modelos que classifiquem
imagens dos dígitos 0 a 9, só nos interessamos na classificação correta; dois
modelos que identifiquem a imagem do número 1 como sendo do número 3 e 8 estão
igualmente errados. O que classificou como 3 não está ``menos errado'' do que o
que classificou como 8 \cite{Kuhn2013,Zumel2014}. O foco deste trabalho é em
classificação. A seguir, apresentarei os modelos utilizados.

\subsubsection{Modelo Linear Generalizado (GLM)}

O \gls{GLM} é uma técnica para encontrar uma função que, a partir das variáveis
independentes, preveja as variáveis dependentes. Ele é uma generalização da
regressão linear, onde as variáveis dependentes podem seguir uma
distribuição diferente da normal, permitindo assim seu uso com variáveis
binárias, por exemplo \cite{Kuhn2013}.

\subsubsection{\emph{Support Vector Machine} (SVM)}

O \gls{SVM} é um modelo de aprendizagem supervisionada. Ele funciona mapeando
as observações em um espaço n-dimensional e encontrando o hiperplano que divide
as classes estando a distância máxima de todos os pontos. A função que define
esse mapeamento se chama ``kernel''. Dependendo da escolha do kernel, o
\gls{SVM} pode aprender relações lineares ou não-lineares \cite{Kuhn2013}.

\subsubsection{Árvore de decisão}

Árvores de decisão podem ser pensados como fluxogramas. Em cada nó da árvore há
uma pergunta como, por exemplo, ``o paciente está com febre?'' ou ``qual a
nacionalidade da pessoa?''. Essas perguntas vão sendo respondidas até chegar
numa folha, onde estará o valor de previsão \cite{Kuhn2013}.

\subsubsection{\emph{Random Forest} (RF)}

O \gls{RF} é um modelo de aprendizagem supervisionada que pode ser usado tanto
para regressão quanto classificação. Ele funciona retornando a moda (na
classificação) ou média (na regressão) dos resultados de um conjunto de
árvores de decisão, cada uma treinada em um subconjunto aleatório das variáveis
independentes.

Ao usar diversas árvores de decisão treinadas com subconjuntos diferentes dos
preditores, o \gls{RF} diminui a chance do modelo se tornar \emph{overfit},
aumentando sua performance \cite{Kuhn2013}.

\subsubsection{\emph{Stochastic Gradient Boosting} (GBM)}

O \gls{GBM} é um modelo que une um conjunto de modelos de baixa performance
(normalmente árvores de decisão) em um único de alta performance. Cada
submodelo $m$ é treinado a partir dos resíduos do modelo $m - 1$. Formalmente,
temos:

Seja $F$ o modelo final, composto por $M$ submodelos, que preveja os valores
$\hat{y} = F(x)$. A cada etapa $1 \le m \le M$, um modelo imperfeito $F_m$ é
treinado com uma amostra aleatória sem reposição dos dados. Na etapa seguinte,
o método adiciona um novo modelo $h$ de forma que $F_{m + 1} = F_m(x) + h(x)$.
Caso $F_{m + 1}$ fosse perfeito, isso significaria que $F_{m + 1} = F_m(x) +
h(x) = y$, o que é equivalente a $h(x) = y - F_m(x)$. Assim, o modelo $h(x)$ é
treinado buscando prever o residual $y - F_m(x)$. Essa técnica é conhecida como
\emph{boosting} \cite{Kuhn2013}.

\subsubsection{C5.0}

O C5.0 é um modelo baseado no C4.5 que gera estimativas a partir de árvores ou
regras de decisão. Ele se diferencia de outros modelos que usam árvores de
decisão pelas técnicas usadas para diminuir a complexidade das árvores,
diminuindo a probabilidade de se tornar \emph{overfit}. À semelhança do
\gls{GBM}, ele também usa técnicas de \emph{boosting}.

Regras de decisão se diferenciam de árvores ao permitir múltiplos critérios em
cada etapa. Por exemplo, uma regra poderia ser ``o paciente está com febre
\emph{e} dor de cabeça?'' \cite{Kuhn2013}.

\subsubsection{Rede neural (NNET)}

Uma \gls{NNET} é um modelo inspirado no funcionamento do cérebro dos animais.
Ele é dividido em camadas com um conjunto de ``neurônios''. Os neurônios
recebem um valor da camada anterior, fazem algum processamento, e passam o novo
valor para todos os neurônios da camada posterior. Na primeira camada, as
entradas são as variáveis independentes, e na última, as saídas são as
previsões do modelo.

Tanto o número de camadas quanto o número de neurônios podem ser modificados,
dependendo dos padrões dos dados e objetivos do modelo \cite{Kuhn2013}.

\subsection{Avaliando performance em modelos de classificação}
\label{cap:fundamentacao:avaliando-modelos-de-classificacao}

\nocite{Ng2012}

Uma das formas mais comuns de descrever a performance de um modelo de
classificação é através de uma ``matriz de confusão''. A Tabela
\ref{table:exemplo-matriz-de-confusao} mostra um exemplo de matriz de confusão
com duas categorias: ``positivo'' e ``negativo''. Na diagonal principal estão
os valores classificados corretamente, e fora dela estão os erros. Dessa matriz
podemos extrair diversas métricas, como:

\begin{table}
\centering
\begin{tabular}{c c c}
  Previsto & \multicolumn{2}{c}{Observado} \\  \cline{2-3}
  & \multicolumn{1}{|c}{Positivo} & \multicolumn{1}{c|}{Negativo} \\
  \hline
  \multicolumn{1}{|c|}{Positivo} & Verdadeiro positivo (VP) & \multicolumn{1}{c|}{Falso positivo (FP)} \\
  \multicolumn{1}{|c|}{Negativo} & Falso negativo (FN) & \multicolumn{1}{c|}{Verdadeiro negativo (VN)} \\
  \hline
\end{tabular}
\caption{Matriz de confusão para um problema com duas classes: ``positivo'' e
``negativo''.}
\label{table:exemplo-matriz-de-confusao}
\end{table}

\begin{description}
\item[Número de amostras positivas]
\begin{equation}
\label{eq:positive-rate}
P = VP + FN
\end{equation}
\item[Número de amostras negativas]
\begin{equation}
\label{eq:negative-rate}
N = VN + FP
\end{equation}
\item[Acurácia] Proporção de predições corretas
\begin{equation}
\label{eq:accuracy}
ACC = \frac{VP + VN}{P + N}
\end{equation}
\item[Sensibilidade] Proporção de elementos da classe positiva classificados
corretamente em relação ao total de elementos positivos
\begin{equation}
\label{eq:sensitivity}
SENS = \frac{VP}{VP + FN}
\end{equation}
\item[Especificidade] Proporção de elementos da classe negativa classificados
corretamente em relação ao total de elementos negativos
\begin{equation}
\label{eq:specificity}
ESPEC = \frac{VN}{FP + VN}
\end{equation}
\end{description}

Dessas métricas, a com interpretação mais simples é a acurácia (equação
\ref{eq:accuracy}), que mede o percentual de predições corretas. Entretanto,
ela tem algumas limitações. Primeiramente, ela não leva em consideração o tipo
do erro. Em diversos problemas, o custo de um falso positivo é diferente do de
um falso negativo. Por exemplo, num sistema de classificação de
\emph{spam}\footnote{E-mails não solicitados.}, é preferível que o usuário veja
uma propaganda (falso negativo) do que deixe de receber um e-mail importante
(falso positivo). Além disso, ela também não considera a frequência natural de
cada classe. Se, por exemplo, 90\% dos e-mails que eu receba não sejam
\emph{spam}, um modelo que simplesmente classifique todo e-mail como não sendo
\emph{spam} terá 90\% de acurácia \cite{Kuhn2013}.

O \emph{Kappa} é uma métrica que leva em consideração as proporções das
classes. Ela pode assumir valores entre -1 e 1, sendo que 1 indica que todas as
predições foram corretas, -1 indica que todas foram erradas, e 0 que o modelo
tem uma performance igual a um aleatório. A equação \ref{eq:kappa} mostra como
calculá-la, onde $ACC$ é a acurácia observada e $ACC_{esperada}$ é a acurácia
esperada \cite{Cohen1960}.

\begin{equation}
\label{eq:kappa}
Kappa = \frac{ACC - ACC_{esperada}}{1 - ACC_{esperada}}
\end{equation}

Em geral, o resultado do uso de modelos de classificação é a probabilidade de
pertencer a cada categoria. Por exemplo, um modelo pode, ao analisar um e-mail,
determinar que ele tem 75\% de chances de ser \emph{spam} e, consequentemente,
25\% de chances de não ser. Para transformar essa probabilidade em uma
categoria define-se um ponto de corte \cite{Kuhn2013}.

Grande parte das ferramentas usa 50\% por padrão, que geralmente é uma escolha
interessante caso o custo de um falso positivo e falso negativo seja o mesmo e
as categorias sejam balanceadas. Caso contrário, é recomendável testar outros
valores. Uma ferramenta para analisar a sensibilidade e especificidade de um
modelo usando diferentes pontos de corte é a curva \gls{ROC}
\cite{Altman1994,Brown2006,Fawcett2006}.

A Figura \ref{fig:exemplo-roc} mostra um exemplo de uma curva \gls{ROC} com os
valores discriminados em dois pontos: 0,5 e 0,614. A partir desse gráfico,
percebemos a troca entre sensibilidade e especificidade (quanto maior um, menor
o outro), e podemos escolher o melhor ponto de corte para o modelo em questão
levando em consideração nossos objetivos.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/exemplo-roc-1} \caption[Curva ROC de um modelo mostrando a área sob a curva (AUC) e dois pontos de corte]{Curva ROC de um modelo mostrando a área sob a curva (AUC) e dois pontos de corte: 0,5, o mais comum, e 0,614, o mais próximo do canto superior esquerdo. O gráfico mostra também os valores de especificidade (Espec) e sensibilidade (Sens) nos dois pontos.}\label{fig:exemplo-roc}
\end{figure}


\end{knitrout}

Além de auxiliar na escolha do ponto de corte, a curva \gls{ROC} também pode
ser usada para avaliar e comparar modelos desenhando-os num mesmo gráfico ou
comparando a área sob suas curvas (\acrshort{AUC}). O modelo na Figura
\ref{fig:exemplo-roc} possui \acrshort{AUC} 0,787. Quanto mais próximo a curva está
do canto superior esquerdo, maior é seu \acrshort{AUC} e, em geral, maior é sua
performance.  O modelo perfeito tem \acrshort{AUC} 1, já um modelo aleatório
tem \acrshort{AUC} 0,5 e segue na diagonal do gráfico. O que caracteriza um
\acrshort{AUC} bom ou ruim varia de caso a caso, mas \citeonline{HosmerJr2013}
definiram uma regra geral para avaliação descrita na Tabela
\ref{table:valores-auc}.

\begin{table}
\centering
\begin{tabular}{c l}
  \acrshort{AUC} & \multicolumn{1}{c}{Valor} \\
  \hline
  0,5 & Não há discriminação \\
  Entre 0,7 e 0,8 & Discriminação aceitável \\
  Entre 0,8 e 0,9 & Discriminação excelente \\
  Acima de 0,9 & Discriminação excepcional \\
\end{tabular}
\caption{Regra geral para avaliação da \glsfirst{AUC} de \citeonline{HosmerJr2013}.}
\label{table:valores-auc}
\end{table}

\section{Teoria espacial do voto}
\label{cap:fundamentacao:teoria-espacial-do-voto}



É comum usar conceitos espaciais para identificar o posicionamento de
atores políticos. Por exemplo, dizemos que um deputado é de esquerda, enquanto
outro é de direita. A teoria espacial do voto é uma formalização dessas ideias.
Ela parte do pressuposto que as preferências individuais e as políticas podem
ser interpretadas como pontos em um espaço euclidiano. Um parlamentar então
votaria na política mais próxima da sua preferência, chamada de ponto ideal
\cite{Leoni2002}.

As dimensões desse espaço correspondem às áreas temáticas relevantes para os
atores, que podem ser muitas. Por exemplo, proteção do meio ambiente, comércio
exterior, distribuição de renda, etc.

Considere um exemplo onde 5 parlamentares votam em um
projeto de Lei que propõe a redução da maioridade penal de
18 para 16 anos. Suponha
que cada um tem uma única preferência (do inglês, \emph{single-peakedness}),
que é o seu ponto ideal, e vota sinceramente de acordo com ela, e que suas
preferências são simétricas. Isto é, dado duas escolhas a uma mesma distância
do ponto ideal de um parlamentar, ele será indiferente a qualquer uma delas.

Graficamente, temos a Figura \ref{fig:modelo-espacial-votacao}, onde as curvas
representam as preferências dos legisladores sobre o assunto dessa votação, com
a altura representando a intensidade da preferência. Os pontos ideais estão nos
picos de cada curva. Há também três linhas, a azul representando o resultado de
um voto ``sim'', a vermelha o de um voto ``não'' (isto é, o \emph{status quo}),
e a preta representa a ``linha de corte'' dessa votação. As linhas de corte
passam pelo ponto médio entre as duas alternativas em votação, separando os
parlamentares que deverão votar sim dos que votarão não. Nesse exemplo, as
escolhas são entre uma maioridade penal de 16 ou
18, logo a linha de corte passa em $\frac{16 +
18}{2}$, ou seja, $17$. Caso o ponto ideal de um parlamentar esteja sobre essa
linha, ele é indiferente às alternativas.

% FIXME: Esse gráfico não funciona em preto e branco
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/modelo-espacial-votacao-1} \caption[Preferências de 5 deputados na votação sobre a redução da maioridade penal de 18 para 16 anos]{Preferências de 5 deputados na votação sobre a redução da maioridade penal de 18 para 16 anos.  Parlamentares a esquerda da linha de corte nos 17 anos votam sim, e os a direita votam não. O deputado com preferência sobre a linha de corte é indiferente às duas opções. Neste exemplo, é ele quem desempata a votação.}\label{fig:modelo-espacial-votacao}
\end{figure}


\end{knitrout}

Há diversos modelos criados para estimar esses valores, como o NOMINATE,
W-NOMINATE, DW-NOMINATE, que são paramétricos; o \emph{Optimal Classification},
que é não-paramétrico, e; modelos baseados em estatística Bayesiana, como o
IDEAL. O foco deste trabalho é o W-NOMINATE.
\cite{Poole1985,Poole2000,Poole2005,Jackman2000,Clinton2004}

O W-NOMINATE faz parte da família de modelos NOMINATE desenvolvidos por
\citeonline{Poole1985}. Eles são baseados no modelo de utilidade aleatória de
\citeonline{McFadden1976}, que define que a utilidade para um legislador em
votar de certa forma é formada por dois componentes: um determinístico e outro
estocástico (erro). Sendo $s$ o número de votações indexadas por $k = 1, ...,
s$; $p$ o número de legisladores indexados por $i = 1, ..., p$, e; $q$ o número
de votações indexados por $j = 1, ..., q$, a utilidade para o legislador $i$ da
consequência política do resultado ``sim'' da votação $j$ é definida como:

\begin{equation}
\label{eq:random-utility}
 U_{ijy} = u_{ijy} + \epsilon_{ijy}
\end{equation}

onde $u_{ijy}$ é a parte determinística e $\epsilon_{ijy}$ é a parte
estocástica da função utilidade $U_{ijy}$. Se não houver erro, o legislador vota sim se
$U_{ijy} > U_{ijn}$, e não se $U_{ijy} < U_{ijn}$, onde $y$ e $n$ representam as
consequências de um voto sim ou não, respectivamente. Caso $U_{ijy} = U_{ijn}$,
ele é indiferente ao resultado. Com o erro, a diferença entre as utilidades é:

\begin{equation}
U_{ijy} - U_{ijn} = u_{ijy} - u_{ijn} + \epsilon_{ijy} - \epsilon_{ijn}
\end{equation}

logo, um legislador vota sim se:

\begin{equation}
u_{ijy} - u_{ijn} > \epsilon_{ijy} - \epsilon_{ijn}
\end{equation}

ou seja, se a diferença das suas utilidades for maior que a diferença dos
erros. No W-NOMINATE, considera-se que a parte determinística $u_{ijy}$ segue a
distribuição normal, com os valores concentrados ao redor do ponto ideal do
legislador, e rapidamente tendendo a zero ao se afastar para ambos os lados.
Com isso, a equação \ref{eq:random-utility} se torna:

\begin{equation}
  U_{ijy} = \beta \exp^{\left( - \frac{1}{2} \sum\limits_{k=1}^s w_k^2 d_{ijky}^2 \right)} + \epsilon_{ijn}
\end{equation}

onde $\beta$ é uma constante que define o peso da parte determinística na
equação; $w_k$ é o peso da dimensão $k$, e; $d_{ijky}^2$ é a distância ao
quadrado na dimensão $k$ do legislador $i$ ($X_{ik}$) da consequência do
resultado sim da votação $j$ ($O_{jky}$):

\begin{equation}
d_{ijky}^2 = \left(X_{ik} - O_{jky}\right)^2
\end{equation}

O método então estima os valores de $O_{jky}$, $O_{jkn}$, $X_{ik}$, $\beta$ e
$w_k$.

% FIXME: Concluir

\subsection{Comparando pontos ideais ao longo do tempo}
\label{cap:fundamentacao:comparando-pontos-ideais-no-tempo}

O principal desafio em comparar mudanças nos pontos ideais ao longo do tempo é
distinguir alterações causadas por mudanças na agenda legislativa das causadas
por mudanças no posicionamento dos parlamentares \cite{Bailey2007}. Em outras
palavras, se o ponto ideal de um deputado federal passa de 0,3 para -0,2 de um ano
para o outro, como descobrir se isso representa uma mudança real de
posicionamento ou é somente reflexo da diferença na agenda legislativa dos dois
períodos?

Segundo \citeonline{Shor2010}, todos os esforços para resolver esse problema
usam ``pontes'', que podem ser parlamentares cujo posicionamento assume-se ter
se mantido estável durante o período de interesse, ou projetos de Lei que
foram votados em mais de um momento (nas duas casas legislativas em um sistema
bicameral, por exemplo). O primeiro é mais usado para comparar as mudanças dos
posicionamentos dos parlamentares, enquanto o segundo permite unir pessoas que
não votaram juntas em um mesmo mapa espacial\footnote{Por exemplo,
\citeonline{Shor2010} colocam todos os legisladores de 11 estados americanos e
do congresso federal em um período que varia entre 7 e 15 anos, dependendo do
estado, em um mesmo mapa espacial.}. \citeonline{Poole2005} propõe duas formas
para estimar pontos ideais usando pontes.

Na primeira forma, batizada de \emph{pooled scaling} por \citeonline{Shor2010},
dividimos os votos dos parlamentares que queremos mensurar em dois
parlamentares ``virtuais'', um com os votos antes e outro com os votos depois
da data de interesse. Unimos esses parlamentares virtuais com os
parlamentares-ponte, que possuem um registro único, em uma tabela individual e
executamos o algoritmo de estimação dos pontos ideais. Ao final, teremos dois
pontos para cada parlamentar de interesse e um ponto para os pontes. Na
segunda forma, que \citeonline{Shor2010} chamam de \emph{linear mapping},
estimamos os pontos ideais separadamente em cada período e os conectamos usando
uma regressão entre os conjuntos de pontos dos parlamentares-ponte. Ambas
formas devem gerar resultados similares, mas a segunda é computacionalmente
mais simples, o que pode ser essencial, dependendo da quantidade de
parlamentares e votações e votos em estudo.

\citeonline{Poole2005} ainda descreve uma terceira forma, similar a
\emph{pooled scaling} descrita acima, que usa para testar se os senadores
norte-americanos mudam de comportamento nos últimos dois anos de seus mandatos,
antes de concorrer à reeleição. Neste caso, ele quer calcular a mudança de
comportamento de todos os legisladores em dois momentos numa mesma legislatura.
Se usássemos o \emph{pooled scaling} diretamente, precisaríamos escolher alguns
parlamentares como pontes que, por definição, não teriam mudado de
comportamento. Ao invés disso, ele segue o seguinte processo:

\begin{enumerate}
  \item Para cada parlamentar, faça:
    \begin{enumerate}
      \item Transforme-o em dois parlamentares ``virtuais'', um com o conjunto
de votos antes, e outro com os depois da data de interesse;
      \item Calcule os pontos ideais usando o conjunto de todos parlamentares,
com a linha referente ao parlamentar dessa iteração substituída pelos dois
parlamentares ``virtuais'' definidos no passo anterior;
      \item Guarde os resultados dos dois parlamentares ``virtuais''. A
diferença entre suas posições representa a mudança de comportamento desse
parlamentar.
    \end{enumerate}
  \item Calcule medidas de incerteza para as estimativas.
\end{enumerate}

Ao final, ele tem dois pontos para cada senador: um representando sua posição
nos primeiros 4, e o outro nos últimos 2 anos da legislatura. Note que, como as
matrizes de votações usadas para gerar os mapas espaciais são diferentes, eles
não são estritamente comparáveis. Apesar disso, \citeonline{Poole2005}
considera que é seguro compará-los, já que eles possuem o mesmo conjunto de
votos, com a única diferença sendo qual parlamentar foi dividido em dois.

\section{Processo legislativo}
\label{cap:fundamentacao:processo-legislativo}

Na esfera federal, o Poder Legislativo é exercido pelo Congresso Nacional, que
é composto por duas casas legislativas, constituindo um sistema bicameral. Essas
casas são a Câmara dos Deputados, que reúne os deputados federais,
representantes do povo, e o Senado Federal, que reúne os senadores,
representantes dos estados e Distrito Federal. Nas outras esferas (estadual,
distrital e municipal), o Poder Legislativo é unicameral.

As funções do Poder Legislativo se dividem em típicas e atípicas. Como típicas,
temos legislar \cite[arts. 48, 49, 51 e 52]{CF1988} e fiscalizar as entidades da
administração direta e indireta \cite[art. 70]{CF1988}. As funções atípicas são
administrar (por exemplo, seu quadro de servidores internos), e julgar (por
exemplo, crimes de responsabilidade do presidente da República). Além dessas,
\citeonline[p. 26]{Carneiro2013} mencionam que, como representantes do povo e da
nação, cabe ao Legislativo ``(...) debater temas importantes o que, muitas
vezes, não necessariamente resulta na inserção de uma nova norma no ordenamento
jurídico ou em uma fiscalização de determinada entidade ou agente público, o
que denota atuação inerente ao exercício da atividade parlamentar.''

O Senado Federal, também chamado de Casa Alta, é composto por 81 senadores, 3
por Estado e Distrito Federal. Os senadores têm mandato de 8 anos e são eleitos
pelo sistema majoritário\footnote{No sistema majoritário, o candidato mais
votado é eleito. Nos anos em que são eleitos 2 senadores, os dois candidatos
mais votados serão eleitos. Ele pressupõe um (ou dois) único candidatos por
partido. É o mesmo sistema usado nas eleições para os chefes do Poder Executivo
(presidente da República, governadores e prefeitos). Com exceção da eleição de
senadores e prefeitos em cidades com menos de 200 mil habitantes, onde há um
único turno, as eleições ocorrem em dois turnos. \cite{Carneiro2013}}. A
renovação da casa é parcial, modificando $\frac{1}{3}$ e $\frac{2}{3}$ dos
senadores alternadamente de 4 em 4 anos.

A Câmara dos Deputados, também chamada de Casa Baixa ou Casa do Povo, é
composta por 513 deputados federais, cujo papel é representar o povo. Cada
Estado ou Distrito Federal elege entre 8 e 70 deputados, proporcionalmente à
sua população. Os deputados têm mandato de 4 anos, eleitos pelo sistema
proporcional\footnote{No sistema proporcional os partidos registram vários
candidatos para o mesmo cargo. Os votos recebidos por cada candidato são
direcionados ao partido, que precisa atingir uma quantidade mínima de votos
(chamado quociente eleitoral) para eleger ao menos um de seus candidatos. Nesse
sistema, um candidato com menos votos pode se eleger, enquanto outro com mais
votos não se elegeu, dependendo dos seus partidos de filiação.
\cite{Carneiro2013,Bramatti2014}}. Diferente do Senado Federal, a renovação é
total de 4 em 4 anos.

O processo legislativo é classificado em ordinário, sumário e especial. O
primeiro se refere a elaboração de leis ordinárias, o sumário se diferencia por
apresentar prazo máximo para apreciação \cite[art. 64]{CF1988}, e o especial se
refere às outras normas jurídicas (e.x.: emendas constitucionais, medidas
provisórias, etc.). De acordo com \citeonline{Carneiro2013}, o processo
legislativo ordinário engloba três fases: 

\begin{description}
\item[Introdutória ou de iniciativa] \hfill \\
É onde se inicia o processo legislativo\footnote{O artigo 61 da Constituição
Federal define quem pode iniciar o processo legislativo. Exceto quando iniciado
por um Senador, o processo começa com a Câmara dos Deputados como Casa
Iniciadora e, consequentemente, o Senado Federal como Casa Revisora.}, com o
projeto entrando em uma das Casas legislativas, denominada Casa iniciadora. Com
exceção dos projetos iniciados por Senadores, a Casa iniciadora é a Câmara dos
Deputados.

\item[Constitutiva] \hfill \\
A Casa iniciadora discutirá o projeto e poderá rejeitá-lo, enviando-o para o
arquivo, ou aprová-lo integralmente ou com emendas, caso em que passará para a
Casa revisora.

Igualmente, a Casa revisora poderá rejeitar o projeto e encaminhá-lo para o
arquivo, aprová-lo com emendas e devolvê-lo à Casa iniciadora para análise das
emendas sugeridas, ou aprová-lo integralmente e enviá-lo para sanção ou veto do
presidente. O projeto só passa para o presidente quando ambas as casas o
aprovam integralmente.

Uma vez o projeto estando com o presidente, ele poderá sancioná-lo e enviá-lo
para promulgação e publicação, ou vetá-lo parcial ou integralmente. Caso haja
um veto, ele será apreciado pelo Congresso Nacional dentro de trinta dias
corridos do seu recebimento, só podendo ser rejeitado pelo voto da maioria
absoluta dos deputados federais e senadores. Caso esse prazo se esgote, ele
será incluído na Ordem do Dia da próxima sessão do Congresso Nacional, se
sobrepondo às demais proposições até ser votado.

\item[Complementar] \hfill \\
É composta pela promulgação, instrumento do Poder Legislativo similar à
sanção do Poder Executivo, que atesta a existência da lei, e a subsequente
publicação no Diário Oficial da União. A lei entrará em vigor em 45 dias após
sua publicação ou em outra data definida nela própria. O intervalo entre sua
publicação e a entrada em vigor é conhecido como \emph{vacatio legis}.
\end{description}

Em linhas gerais, o projeto é iniciado em uma das casas legislativas
(normalmente a Câmara), que passa a ser conhecida como Casa Iniciadora. Ele é
discutido e, caso aprovado, passa para a outra casa legislativa, chamada de
Casa Revisora, que pode aceitá-lo integralmente (o que o faz seguir para sanção
ou veto pelo presidente da República); aceitá-lo com emendas e devolvê-lo à
Casa Iniciadora para apreciação das emendas sugeridas, ou; rejeitá-lo e
encaminhá-lo ao arquivo. Caso o presidente vete parcial ou integralmente o
projeto, o Congresso Nacional apreciará o veto, podendo mantê-lo e arquivar o
projeto, ou rejeitá-lo (por maioria absoluta) e devolvê-lo ao presidente para
promulgação \cite{Carneiro2013}.

Existem dois tipos de votação: ostensiva e secreta. A votação ostensiva é
utilizada nas proposições em geral, e é a regra na Câmara dos Deputados. Ela
pode ocorrer pelos processos simbólico ou nominal. No processo simbólico, o
presidente da casa, ao anunciar a votação, convida os deputados a favor da
matéria a permanecerem sentados, devendo os contrários manifestarem-se
(normalmente levantando um braço). No processo nominal, os parlamentares votam
usando um meio eletrônico ou, em caso de falha, por chamada nominal
\cite{Carneiro2013}.

Na Câmara dos Deputados, o processo nominal é utilizado nos casos em que seja
exigido quórum especial de votação (como nas emendas constitucionais); por
deliberação do Plenário, a requerimento de qualquer deputado, e; quando houve
pedido de verificação de votação por 6\% dos membros da Casa (31 deputados), ou
líder que represente esse número \cite[art. 186]{RICD2015}. No geral, as
votações nominais compreendem o subconjunto de decisões mais importantes e
polêmicas \cite{Figueiredo2001}.

\section{Considerações Finais}

O objetivo deste capítulo foi fornecer um conjunto mínimo de conhecimento
necessário para a compreensão do restante deste trabalho. Para isso, foram
descritos o processo de desenvolvimento e avaliação de modelos preditivos,
focando em modelos de classificação. Em seguida, foi explicada brevemente a
teoria espacial do voto, em especial a técnica W-NOMINATE. Por fim, o processo
legislativo brasileiro a nível federal foi descrito, com ênfase nos tipos de
votação.

No próximo capítulo, serão apresentados alguns trabalhos relacionados aos temas
desta dissertação, analisando suas metodologias e resultados em comparação com
o deste trabalho.
\input{03-trabalhos-relacionados}





\chapter{Desenvolvimento do modelo preditivo}\label{cap:desenvolvimento}

Neste capítulo apresentaremos o processo de criação do modelo preditivo,
partindo da coleta e preparação dos dados, onde serão estimadas as mudanças de
comportamento, passando pela análise dos dados visando definir os preditores
(variáveis independentes). Ao final, treinaremos 6 tipos de modelos diferentes,
escolhendo o final de acordo com a \glsfirst{AUC}.

\section{Coleta dos dados}



Os votos e votações foram extraídos diretamente do site da Câmara dos Deputados
através de sua \gls{API}\footnote{Em tradução livre, ``Interface de Programação
de Aplicativos''.} \cite{CamaraDosDeputados2015}. Para desenvolver o modelo
preditivo, precisamos ter acesso a todos os dados na máquina local. Entretanto,
até a data de publicação deste trabalho, a \gls{API} da Câmara só permitia
consultas individuais, votação por votação, por isso desenvolvi um
programa\footnote{Disponível em:
\url{https://github.com/vitorbaptista/dados-abertos-camara.gov.br}} na
linguagem Python que, com o auxílio da biblioteca Scrapy, baixa todas as
votações \cite{Python276,Scrapy}. A Tabela
\ref{table:estatisticas-legislaturas} mostra o número de deputados federais,
votos e votações por legislatura. Em média, temos 624
parlamentares e 332 votos em
478 votações a cada legislatura.

\begin{table}
\centering
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}
\begin{tabular}{r|r|r|r}
\hline
Legislatura & Deputados Federais & Votações & Votos\\
\hline
50 & 631 & 468 & 178603\\
\hline
51 & 624 & 419 & 155737\\
\hline
52 & 614 & 451 & 134461\\
\hline
53 & 606 & 619 & 192879\\
\hline
54 & 644 & 432 & 131552\\
\hline
\end{tabular}


\end{knitrout}
\caption{Número de deputados federais e votações por legislatura}
\label{table:estatisticas-legislaturas}
\end{table}

% Coalizão
A lista das coalizões foi obtida através do banco de dados
legislativos do \gls{CEBRAP}. Ela contém a data de início e fim e a composição
partidária de cada coalizão. Como trabalhamos com os parlamentares
individualmente, gerei outra lista que contém todas as entradas e saídas dos
deputados federais na coalizão dentro de uma mesma legislatura. Por exemplo,
apesar do deputado Arlindo Chinaglia (PT/SP) passar de oposição a governo
em 2003 com a eleição de Lula, não consideramos isso uma mudança pois ela
ocorreu entre legislaturas. Já a saída de Romário (PSB/RJ) da coalizão quando
seu partido se tornou oposição em 2013 é considerada, pois ocorreu dentro de
uma mesma legislatura.

As coalizões são compostas pelos partidos que controlam ao menos um ministério.
Uma nova coalizão é formada em duas situações: i) na mudança de governo, e;
ii) na mudança do conjunto de partidos que controlam ministérios. Em outras
palavras, uma nova coalizão é formada quando um partido que não possuía nenhum
ministério passa a ter ao menos um, quando um partido que controlava algum
ministério passa a não ter nenhum, ou quando se inicia um novo governo.
Esses critérios foram definidos por \citeonline{Figueiredo2007}, inspirada no
trabalho de \citeonline{Muller2000}.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/mudancas-mensais-de-coalizao-1} \caption[Número de deputados federais que mudaram de posicionamento, entrando ou saindo da coalizão entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agrupados mês a mês]{Número de deputados federais que mudaram de posicionamento, entrando ou saindo da coalizão entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agrupados mês a mês.}\label{fig:mudancas-mensais-de-coalizao}
\end{figure}


\end{knitrout}

A Figura \ref{fig:mudancas-mensais-de-coalizao} mostra as
890 entradas e saídas da coalizão que ocorreram
durante o período de estudo, agrupadas mensalmente. Há meses que concentram
as mudanças de posicionamento, que serão melhor analisadas na Seção
\ref{cap:desenvolvimento:aspectos-temporais}. A linha tracejada marca a data da Resolução
n\textordmasculine{} 22.610 do TSE, que em 24/10/2007
alterou o entendimento das regras de fidelidade partidária, tornando-as mais
restritas \cite{TSE2007}. Aparentemente, essa mudança alterou os aspectos
temporais das mudanças de posicionamento, o que influencia na construção do
modelo, mais especificamente na divisão dos dados, tratada na Seção
\ref{cap:desenvolvimento:divisao-dados}.

\section{Preparação dos dados}

% Universo de votações

% FIXME: Confirmar uso da crase
O período de análise deste trabalho é composto pela 50\textordfeminine{},
51\textordfeminine{}, 52\textordfeminine{}, 53\textordfeminine{} e
54\textordfeminine{} legislaturas, compreendendo os 20 anos de 1995 até o
início de 2015, entre o primeiro mandato de Fernando Henrique Cardoso até o
início do segundo mandato de Dilma Rousseff. As 48\textordfeminine{} e
49\textordfeminine{} legislaturas, iniciadas respectivamente em 1987 e 1991,
foram excluídas pois, segundo \citeonline{Freitas2008}, elas ocorreram em um
período onde parlamentares ainda estavam se acomodando às novas regras advindas
da transição à democracia.

% Universo de parlamentares

A análise se restringe à Câmara dos Deputados por três razões: facilidade na
obtenção dos dados, e; maior número de parlamentares (513 contra 81 no Senado
Federal) \cite{Vicente2012}.

A unidade de análise usada é o parlamentar, pois, apesar da literatura apontar o
papel fundamental dos partidos no comportamento dos parlamentares
\cite{Figueiredo2001,Santos2003,Freitas2008}, trabalhar com os dados
desagregados nos permite perceber movimentações como quando um parlamentar
deixa um partido governista para entrar em um de oposição (ou vice-versa).
Considerei todos os parlamentares que votaram ao menos uma vez na Câmara, por
isso o número é maior do que os 513 eleitos por legislatura.

% Universo de votos

Os deputados podem votar sim, não, nulo, branco, se abster ou obstruir
\cite{Carneiro2013}, mas o método W-NOMINATE usado neste trabalho só considera
votos sim ou não. Isso nos dá duas opções: mapear os outros tipos de votos como
sendo a favor ou contra (por exemplo, considerando abstenções como votos
contrários), ou ignorá-los. Para evitar possíveis problemas metodológicos ao
criar critérios desse tipo, desconsidero votos diferentes de sim ou não.

\subsection{Estimando a mudança de comportamento}
\label{cap:desenvolvimento:estimando-mudanca-comportamento}

Para estimar a mudança de comportamento, seguirei a metodologia de
\citeonline{Poole2005} descrita na Seção
\ref{cap:fundamentacao:comparando-pontos-ideais-no-tempo} usando o modelo
W-NOMINATE \cite{Poole1985}. Esse modelo foi escolhido pois, apesar de
diversos outros modelos terem sido desenvolvidos nos 30 anos desde sua criação,
ele continua sendo um dos modelos mais usados \cite{Poole2011}, inclusive no
Brasil \cite{Leoni2002,Desposato2005b,Zucco2009,Freitas2012,Bernabel2015}.

Ao estimar os pontos ideais usando esse modelo, precisamos definir 5
parâmetros: número de dimensões; polaridade(s); critérios de inclusão de
parlamentares e votações; número de repetições para estimar o erro, e; período
de análise. Eles serão definidos nas próximas subseções.

\subsubsection{Número de dimensões}

\citeonline{Leoni2002} analisou o número de dimensões necessárias para explicar
o comportamento dos parlamentares na Câmara dos Deputados de 1991 a 1998.
\citeonline{Freitas2012} expandiram esse trabalho analisando não só a Câmara,
mas também o Senado Federal, usando os dados do período de 1988 a 2010.
\citeonline{Izumi2013} analisou o Senado de 1989 a 2010 usando outro modelo
espacial de votação, o \emph{Optimal Classification}. Exceto durante a
49\textordfeminine{} legislatura, onde tivemos dois presidentes (Collor e
Itamar Franco), todos concluíram que o congresso é predominantemente
unidimensional. Como essa legislatura não será analisada neste trabalho, usarei
uma única dimensão.

\subsubsection{Polaridade}

A polaridade define qual é a direção dos eixos das dimensões. No caso de uma
única dimensão, o parlamentar escolhido como polaridade será colocado nos
valores positivos. Idealmente, deve-se escolher um parlamentar que não tenha
mudado de posicionamento no período e que tenha participado do maior número de
votações. Como o PT é, historicamente, um dos partidos mais disciplinados do Brasil e
nunca mudou de posicionamento durante uma legislatura, sendo sempre oposição
até se tornar governo com a eleição de Lula em 2003, escolhi parlamentares
filiados a ele como polaridade.

O deputado José Genoíno foi usado nas 50\textordfeminine{},
51\textordfeminine{} e 53\textordfeminine{} legislaturas, Arlindo Chinaglia na
52\textordfeminine{} e Luiz Couto na 54\textordfeminine{}. Eles foram
escolhidos pois nunca trocaram de partido, ocuparam cargos de liderança e
participaram de um grande número de votações nas legislaturas em que foram
escolhidos.

\subsubsection{Critérios de inclusão de parlamentares e votações}
\label{cap:desenvolvimento:criterios-de-inclusao}

Incluímos parlamentares que participaram de no mínimo 20 votações cujo lado
minoritário foi responsável por 2,5\% ou mais dos votos. Esses são os critérios
padrão do W-NOMINATE, seguidos nos trabalhos de
\citeonline{Leoni2002,Zucco2009,Freitas2012}.

\subsubsection{Períodos de análise}
\label{cap:desenvolvimento:periodos-de-analise}

Na análise de uma mudança de comportamento, é preciso definir ao menos dois
períodos: um anterior e outro posterior a data de interesse. Por exemplo, para
analisar o efeito da saída do PSB da coalizão em outubro de 2013 no
comportamento dos parlamentares, poderíamos definir o período inicial como
sendo do início da legislatura até a data da saída do PSB, e o período final
como sendo da saída do PSB até o final da legislatura. Como o objetivo deste
trabalho não é analisar um período específico, mas criar um modelo que detecte
mudanças na coalizão, não basta definir um, mas sim um conjunto de
períodos.

Ao definir esses períodos, é preciso levar em consideração diversos fatores.
Períodos muito curtos, como uma semana antes e uma semana depois, podem sofrer
com a falta de votações suficientes ou serem demasiadamente influenciados por
votações anômalas. Já períodos muito longos, como 5 anos antes e 5 anos depois,
dificultam a interpretação dos resultados pois podem conter diversas mudanças
de comportamento. No mínimo, precisamos de um período que contenha votações
suficientes de acordo com nossos critérios de inclusão definidos na Seção
\ref{cap:desenvolvimento:criterios-de-inclusao}.

Baseado nisso, defini períodos de 12 meses dentro de uma mesma legislatura
divididos em duas partes de mesmo tamanho. Eles iniciam no primeiro dia de cada
mês, partindo de 01/Fev no primeiro ano da legislatura até o do último. Por
exemplo, na 54\textordfeminine{} legislatura, o primeiro período vai de
01/Fev/2011 até 01/Fev/2012 (dividido em 01/Ago/2011), e o último vai de
01/Fev/2014 até 01/Fev/2015. Existem 37 desses períodos por legislatura, 185
nas 5 legislaturas estudadas neste trabalho. A arbitrariedade dessa escolha é
uma limitação deste trabalho, que será melhor analisada na Seção
\ref{cap:conclusao:limitacoes}.

\subsubsection{Estimativas de erro}
\label{cap:miolo:estimativas-de-erro}

\citeonline{Poole2005} sugere, sem justificar esse número, repetir as
estimativas 101 vezes para calcular seu erro. Entretanto, o volume de dados que
estamos trabalhando inviabiliza esse número de repetições com os recursos
computacionais disponíveis para esta pesquisa\footnote{Por exemplo, usando um
núcleo de um processador AMD Opteron\texttrademark{} 6238 com 2,6 GHz o
processamento dos pontos ideais de um parlamentar em um período demora cerca de
1h45m. Considerando somente os 513 deputados eleitos por legislatura, o
cálculo de todos os 37 períodos levaria aproximadamente 18 meses. Todas as 5
legislaturas analisadas neste trabalho levariam mais de 7 anos. O cálculo é
facilmente paralelizável, diminuindo o tempo necessário de acordo com o número
de processadores, mas ainda assim não foi possível usar 101 repetições neste
trabalho.}. Por isto, escolhi fazer 10 repetições, o que diminuiu o tempo
necessário em cerca de 90\%.

\subsection{``Raio de influência'' de uma mudança de posicionamento}
\label{cap:desenvolvimento:raio-de-influencia}

Até esse momento, temos uma tabela onde cada linha representa um parlamentar em
um período, e nas colunas temos seus pontos ideais e as respectivas estimativas
de erro. Em outras palavras, temos nossas variáveis independentes, agora
precisamos determinar a variável dependente: se o parlamentar mudou de
posicionamento, entrando ou saindo da coalizão, ou se manteve como estava.

Para isso, precisamos definir qual o período antes de uma mudança de
posicionamento que o parlamentar começa a mudar de comportamento. Por exemplo,
considere que detectamos que um parlamentar que está fora da coalizão se
aproximou do governo entre o primeiro e o segundo semestre de 2011, mas só
entrou na coalizão em 2014. Devemos considerar que essa aproximação em 2011 foi
indício da sua entrada em 2014? E se ela tivesse ocorrido em 2012?  Em outras
palavras, precisamos definir qual o ``raio de influência'' de uma entrada ou
saída da coalizão.

Não há uma resposta única. Alguns parlamentares podem mudar de comportamento
anos antes de mudarem de posicionamento, enquanto outros podem não mudar em
momento algum. A hipótese fundamental deste trabalho é que eles mudam de
comportamento antes de mudar de posicionamento, caso contrário seria impossível
prever um a partir do outro. Formalmente, sendo $Data_{coaliz\tilde{a}o}$ a
data de entrada ou saída da coalizão, $Data_{inicial}$ e $Data_{final}$ as
datas iniciais e finais do período analisado, $Data_{m\acute{e}dia}$ a data que
divide o período analisado em dois, ``antes'' e ``depois'', e $P =
Data_{m\acute{e}dia} - Data_{inicial} = Data_{final} -
Data_{m\acute{e}dia}$ a distância da data inicial até a data média, que é igual
a da data média até a data final, então o período em que consideramos que uma
mudança de comportamento esteja relacionada a mudança de posicionamento
compreende $\left[Data_{m\acute{e}dia} - \frac{P}{2}, Data_{m\acute{e}dia} +
\frac{P}{2}\right]$. Precisamos definir $P$.

Para entender melhor, vejamos a Figura \ref{fig:raio-de-influencia-coalizao}.
Nela são mostrados cinco períodos de análise de um parlamentar que mudou de
comportamento em $Data_{coaliz\tilde{a}o} - P$, representado pela mudança da
região azul para a verde, com o período de análise em cada momento representado
pela região escurecida entre $Data_{inicial}$ e $Data_{final}$. No primeiro
período, \ref{fig:raio-de-influencia-coalizao1}, a $Data_{final}$ é igual ao
momento de mudança de comportamento. Aqui, não consideramos que houve uma
mudança de posicionamento, pois o comportamento dentro desse período é
constante (região azul). Na Figura \ref{fig:raio-de-influencia-coalizao2}, a
mudança de comportamento ocorre no ponto médio entre a $Data_{m\acute{e}dia}$ e
a $Data_{final}$. A partir daqui começamos a considerar que o parlamentar mudou
de posicionamento. Na Figura \ref{fig:raio-de-influencia-coalizao3}, a
$Data_{final} = Data_{coaliz\tilde{a}o}$, e a $Data_{m\acute{e}dia}$ se iguala
a data da mudança de comportamento em $Data_{coaliz\tilde{a}o} - P$. Se a
escolha de $P$ foi correta para este parlamentar, esse deve ser o período com a
mudança de comportamento mais intensa. A Figura
\ref{fig:raio-de-influencia-coalizao4} mostra o último período em que ainda
consideramos que houve uma mudança de comportamento causada por uma mudança de
posicionamento, pois a partir dele o comportamento em $\left[Data_{inicial},
Data_{m\acute{e}dia}\right]$ começa a se igualar ao em
$\left[Data_{m\acute{e}dia}, Data_{final}\right]$. Na última figura, a
\ref{fig:raio-de-influencia-coalizao5}, o comportamento nos dois momentos do
período de estudo se igualam.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\subfloat[A data final do período de análise é igual ao dia em que o parlamentar mudou de comportamento por causa da futura mudança de posicionamento. Como, dentro desse período atual, supomos que o parlamentar manteve o mesmo comportamento, ainda não consideramos que houve uma mudança.\label{fig:raio-de-influencia-coalizao1}]{\includegraphics[width=\maxwidth]{figure/tmp/raio-de-influencia-coalizao-1} }
\subfloat[O raio de influência da coalizão chega a metade do segundo período. A partir daqui começamos a considerar que houve uma mudança de posicionamento, pois o parlamentar esteve com outro comportamento em mais da metade da segunda parte do período.\label{fig:raio-de-influencia-coalizao2}]{\includegraphics[width=\maxwidth]{figure/tmp/raio-de-influencia-coalizao-2} }
\subfloat[A $Data_{media}$ se iguala a data de mudança. Este é o período onde esperamos encontrar a maior mudança de comportamento.\label{fig:raio-de-influencia-coalizao3}]{\includegraphics[width=\maxwidth]{figure/tmp/raio-de-influencia-coalizao-3} }
\subfloat[A partir daqui, o comportamento começa a se igualar nos dois momentos de análise. Este é o último período em que consideramos que houve uma mudança de posicionamento.\label{fig:raio-de-influencia-coalizao4}]{\includegraphics[width=\maxwidth]{figure/tmp/raio-de-influencia-coalizao-4} }
\subfloat[O comportamento nos dois períodos se iguala.  Esperamos que a diferença entre os pontos ideais dos dois momentos volte aos níveis da segunda figura.\label{fig:raio-de-influencia-coalizao5}]{\includegraphics[width=\maxwidth]{figure/tmp/raio-de-influencia-coalizao-5} }\caption[Diversos períodos de análise de um parlamentar que mudou de comportamento em ]{Diversos períodos de análise de um parlamentar que mudou de comportamento em $Data_{coalizao} - P$, representado pela mudança da região branca para a verde.}\label{fig:raio-de-influencia-coalizao}
\end{figure}


\end{knitrout}

Neste trabalho, defini $P$ como sendo 6 meses. Em outras palavras, os
parlamentares começariam a mudar de comportamento a partir de 6 meses antes da
definitiva entrada ou saída da coalizão. Por ser uma escolha arbitrária, esta é
uma limitação do trabalho. Na Seção \ref{cap:conclusao:limitacoes}
discorro sobre os possíveis problemas dessa escolha e sugestões sobre como
remediá-los em um trabalho futuro.

\section{Análise dos dados}
\label{cap:desenvolvimento:analise}

Segundo \citeonline{Kuhn2013}, uma das etapas mais importantes na criação de
modelos preditivos é analisar os dados, buscando padrões que poderão ser
utilizados para o aumento de sua performance. Nas seguintes subseções,
analisaremos as características das estimativas de pontos ideais e seus padrões
temporais.

\subsection{Pontos ideais}



O conjunto de dados gerado possui 113.952 estimativas de mudança
de comportamento em 185 períodos de 12 meses divididos em dois
subperíodos de mesma duração. Não foi possível estimar o ponto ideal em um ou
ambos subperíodos em 31.04\%
(35.376) períodos, pois o parlamentar não participou de
votações o suficiente, ou as que ele participou não passaram nos critérios de
inclusão definidos na Seção \ref{cap:desenvolvimento:criterios-de-inclusao}. Esses casos
foram excluídos, sobrando ao final 78.576 observações.

Desses valores, 3.98\%
(3.130) são de períodos em que houve uma mudança de
posicionamento, enquanto 96.02\% (75.446) não. Por legislatura, existem em
média 4\%
mudanças, com o máximo ocorrendo na 52\textordfeminine{}
(7.07\%) e o
mínimo na 53\textordfeminine{}
(1.55\%).  A
Tabela \ref{table:coalition-changes-per-legislature} mostra esses dados em
todas as legislaturas estudadas.

\begin{table}
\centering
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}
\begin{tabular}{l|r|r|r|r|r}
\hline
  & 50 & 51 & 52 & 53 & 54\\
\hline
S & 0.04 & 0.04 & 0.07 & 0.02 & 0.03\\
\hline
N & 0.96 & 0.96 & 0.93 & 0.98 & 0.97\\
\hline
\end{tabular}


\end{knitrout}
\caption{Percentual de deputados que mudaram de posicionamento por legislatura.}
\label{table:coalition-changes-per-legislature}
\end{table}

A Figura \ref{fig:pontos-ideais-por-legislatura} mostra a densidade dos valores
dos pontos ideais em cada legislatura, com o PT estando a direita do gráfico.
Na 50\textordfeminine{} e 51\textordfeminine{} legislaturas, durante o governo
do PSDB, a maior parte dos deputados federais encontram-se ao lado esquerdo.
Esse quadro muda a partir da eleição de Lula em 2003, na 52\textordfeminine{}
legislatura, com a maioria dos parlamentares estando mais a direita do gráfico.
Na 53\textordfeminine{} legislatura as posições se tornam mais polarizadas, com
dois picos claros, um na direita do gráfico e outro, menor, na esquerda. Por
fim, durante o primeiro governo de Dilma Rousseff, na 54\textordfeminine{}
legislatura, os pontos ideais se concentram no centro.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/pontos-ideais-por-legislatura-1} \caption[Distribuição dos pontos ideais nos 37 períodos de análise a cada legislatura]{Distribuição dos pontos ideais nos 37 períodos de análise a cada legislatura.}\label{fig:pontos-ideais-por-legislatura}
\end{figure}


\end{knitrout}

\subsection{Aspectos temporais}
\label{cap:desenvolvimento:aspectos-temporais}



Uma das principais características da migração partidária no Brasil é sua
distribuição no tempo \cite{Araujo2000,Melo2004,Freitas2008}. A partir de 1995,
ela se concentra nos meses de fevereiro do primeiro e terceiro ano da
legislatura e no período pré-eleitoral, que se encerra em outubro do ano
anterior às eleições \cite{Freitas2008,Lei9504/1997}. Nesta seção,
analisaremos se as mudanças de posicionamento também seguem um padrão temporal.

Há duas formas de um parlamentar entrar ou sair da coalizão: quando seu partido
o faz, ou mudando de partido. Das 890 mudanças de
posicionamento no período de estudo,
50.79\% (452)
ocorreram por migrações e
49.21\% (438)
pelo partido ter mudado de posicionamento. Consideramos a data de mudança
de posicionamento de formas diferentes em cada caso. Quando o partido como um
todo entra ou sai da coalizão, consideramos a data de mudança como a data de
início da coalizão. Já em uma mudança por migração, usamos a data da primeira
votação do parlamentar no novo partido\footnote{Idealmente, a data de mudança
por migração deveria ser a data de filiação do parlamentar ao novo partido.
Infelizmente, essa informação não está disponível através da \gls{API} da
Câmara para todas as legislaturas analisadas, então usei a data da primeira
votação no novo partido. Como, no período de análise, 99\% dos parlamentares
faltaram no máximo 35 votações seguidas, as duas datas devem ser próximas na
maioria dos casos.}.

A Figura \ref{fig:mudancas-de-posicionamento-geral} mostra o número de
deputados federais que mudaram de posicionamento entre a 50\textordfeminine{} e
54\textordfeminine{} legislaturas agregados por mês. Quatro meses, janeiro,
março, abril e outubro, concentram
65.06\%
(579) das mudanças, o que pode
ser um indício que as mudanças de posicionamento seguem um padrão temporal.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/mudancas-de-posicionamento-geral-1} \caption[Número de deputados que mudaram de posicionamento entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agregados por mês]{Número de deputados que mudaram de posicionamento entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agregados por mês.}\label{fig:mudancas-de-posicionamento-geral}
\end{figure}


\end{knitrout}

Na Figura \ref{fig:mudancas-de-posicionamento-por-migrantes}, separamos os
deputados que mudaram de posicionamento migrando de partido (migrantes) dos
cujo próprio partido mudou de posicionamento (não-migrantes). O padrão temporal
dos dois grupos é visivelmente distinto. Os que migraram de partido mudaram de
comportamento em média 38 vezes por mês, com
29.87\%
(135) ocorrendo em outubro. Houve respectivamente
13.27\%
(60) e
11.28\%
(51) em março e fevereiro, os segundo e terceiro
meses com mais mudanças. Já os parlamentares cujos partidos entraram ou saíram
da coalizão mudaram de posicionamento em média
36 vezes por mês, com janeiro, março e
maio concentrando
46.8\%
(205) das mudanças.

% FIXME: As escalas devem ser em percentual, não em absoluto
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/mudancas-de-posicionamento-por-migrantes-1} \caption[Número de deputados migrantes e não-migrantes que mudaram de posicionamento entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agregados por mês]{Número de deputados migrantes e não-migrantes que mudaram de posicionamento entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agregados por mês.}\label{fig:mudancas-de-posicionamento-por-migrantes}
\end{figure}


\end{knitrout}

Separamos os dados por legislatura na Figura
\ref{fig:mudancas-de-posicionamento-por-migrantes-por-legislatura}. Os
migrantes continuam com um padrão parecido, com em média
32.06\%
das mudanças ocorrendo em outubro,
14.18\%
em março e
10.48\%
em fevereiro. Os não-migrantes não seguem um padrão único, mudando a cada
legislatura.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/mudancas-de-posicionamento-por-migrantes-por-legislatura-1} \caption[Número de deputados migrantes e não-migrantes que mudaram de posicionamento entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agregados por mês e legislatura]{Número de deputados migrantes e não-migrantes que mudaram de posicionamento entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agregados por mês e legislatura.}\label{fig:mudancas-de-posicionamento-por-migrantes-por-legislatura}
\end{figure}


\end{knitrout}

Na Figura \ref{fig:mudancas-de-posicionamento-por-ano-da-legislatura},
agregamos por ano da legislatura ao invés de mês. A grande maioria das
mudanças dos migrantes,
84.07\%
(380), estão concentradas no
primeiro e terceiro anos, seguindo o padrão temporal de migração descrito por
\citeonline{Freitas2008}. Já os não-migrantes continuam sem um padrão claro.
Como só consideramos mudanças dentro da mesma legislatura, só uma ocorreu no
primeiro ano, durante o segundo mandato de Lula, quando o PDT entrou na
coalizão em abril de 2007. As outras mudanças estão razoavelmente bem
espalhadas do segundo ao último ano das legislaturas, com a maioria ocorrendo
no segundo ano.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/mudancas-de-posicionamento-por-ano-da-legislatura-1} \caption[Número de deputados migrantes e não-migrantes que mudaram de posicionamento entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agregados por ano da legislatura]{Número de deputados migrantes e não-migrantes que mudaram de posicionamento entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agregados por ano da legislatura.}\label{fig:mudancas-de-posicionamento-por-ano-da-legislatura}
\end{figure}


\end{knitrout}

Separando os dados por mês e ano da legislatura, temos a Figura
\ref{fig:mudancas-de-posicionamento-por-migrantes-por-ano-da-legislatura}. Nos
migrantes,
52.55\%
(103) das mudanças ocorrem
em outubro do terceiro ano, o limite para se filiar a um partido para concorrer
nas eleições seguintes \cite{Lei9504/1997}. Os não-migrantes continuam sem um
padrão claro.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/mudancas-de-posicionamento-por-migrantes-por-ano-da-legislatura-1} \caption[Número de deputados que mudaram de posicionamento entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agregados por mês e ano da legislatura]{Número de deputados que mudaram de posicionamento entre a 50\textordfeminine{} e 54\textordfeminine{} legislaturas agregados por mês e ano da legislatura.}\label{fig:mudancas-de-posicionamento-por-migrantes-por-ano-da-legislatura}
\end{figure}


\end{knitrout}

Em suma, os deputados que entram ou saem da coalizão migrando de partido
seguem um padrão temporal similar ao das migrações partidárias em geral
descrito por \citeonline{Freitas2008}, enquanto os que mudam de posicionamento
sem migrar de partido não têm um padrão claro.

\section{Modelagem}
\label{cap:desenvolvimento:modelagem}



Esta seção trata do desenvolvimento do modelo preditivo. Para isto,
inicialmente definirei as variáveis dependente e independentes e as divisões do
conjunto de dados e, em seguida, treinarei modelos de diversos tipos, buscando
o que possui a maior \gls{AUC}. Encontrado esse modelo,
definirei o ponto de corte para classificação das categorias, e estimarei sua
performance final.

\subsection{Variável dependente}

Como variável dependente, que é o que queremos prever, usei a mudança ou não de
comportamento do parlamentar no período. Ela foi definida a partir dos períodos
e ``raio de influência'' apresentados na Seção
\ref{cap:desenvolvimento:raio-de-influencia}, e toma o valor ``S'', quando
houve uma mudança de posicionamento, e ``N'', quando não houve. Como já visto
anteriormente, das 78.576 observações,
3.98\%
(3.130) são relativas a mudanças
de posicionamento, e 96.02\%
(75.446) não.

\subsection{Variáveis independentes}
\label{cap:desenvolvimento:variaveis-independentes}

A partir dos resultados das análises descritas na Seção
\ref{cap:desenvolvimento:analise}, defini 6 variáveis independentes, sendo 4 relativas
às estimativas de pontos ideais e seus erros, e duas relacionadas aos padrões
temporais descritos na Seção \ref{cap:desenvolvimento:aspectos-temporais}. A Tabela
\ref{table:variaveis-independentes} contém a descrição e natureza de cada uma
delas.

\begin{table}
\centering
\begin{tabular}{l l c}
  Variável & Descrição & Natureza \\
  \hline
  antes & Estimativa do ponto ideal no momento inicial & Contínua \\
  antes.sd & Estimativa de erro do ponto ideal no momento inicial& Contínua \\
  depois & Estimativa do ponto ideal no momento final & Contínua \\
  depois.sd & Estimativa de erro do ponto ideal no momento final & Contínua \\
  mês & Mês na data média do período & Ordinal \\
  ano da legislatura & Ano da legislatura na data média do período & Ordinal \\
\end{tabular}
\caption{Variáveis independentes usadas na criação dos modelos preditivos.}
\label{table:variaveis-independentes}
\end{table}

A Figura \ref{fig:variaveis-independentes} mostra a distribuição dos valores das
variáveis independentes agrupados pela mudança ou não de posicionamento no
período. Visualmente, os padrões são parecidos, mas ao treinar os modelos usei
não só essas variáveis, como também as interações entre elas. Dessa forma, eles
podem aprender características mais complexas, de difícil visualização.

As variáveis ``antes'' e ``depois'' possuem uma correlação alta, de
0,91. Os erros possuem correlação baixa, sendo
0,49 a correlação entre eles,
0,21 a do ``antes'' com seu erro
``antes.sd'', e 0,23 a do ``depois'' com seu
erro ``depois.sd''. Ao separar os parlamentares que mudaram de posicionamento,
sua correlação entre ``antes'' e ``depois'' cai para
0,67, enquanto os outros continuam com
correlação 0,91. Essa diferença faz sentido, já
que esperamos que quem mudou de posicionamento tenha alterado seus pontos
ideais, enquanto os de quem não mudou tenham se mantido constantes.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/variaveis-independentes-1} \caption[Densidade das variáveis independentes dos parlamentares em períodos que mudaram de posicionamento e dos que mantiveram]{Densidade das variáveis independentes dos parlamentares em períodos que mudaram de posicionamento e dos que mantiveram.}\label{fig:variaveis-independentes}
\end{figure}


\end{knitrout}

\subsection{Divisão da base de dados}
\label{cap:desenvolvimento:divisao-dados}

% FIXME: Falta falar sobre o LGOCV

Existem tipos de modelos capazes de aprender a estrutura de um conjunto de
dados tão bem que, quando validados com o mesmo conjunto de dados usado para
treiná-los, conseguem prever corretamente 100\% dos casos. O problema é que
eles aprenderam não só os padrões gerais dos dados, mas também seu ruído. Esses
modelos estão superajustados (do inglês, \emph{overfit}), e têm normalmente uma
baixa performance ao serem usados em novos dados. Para evitar esse problema, é
necessário testá-los em um conjunto de dados diferente do que foram treinados,
o que gera a questão sobre como dividir os dados \cite{Kuhn2013}.

A forma mais simples é dividir aleatoriamente o conjunto de dados em dois
subconjuntos, um para treino e outro para teste. Divisões aleatórias partem do
princípio de que o padrão dos dados é uniforme, logo não há diferença na
escolha. Visto que estamos trabalhando com um período longo, inclusive com uma
alteração nas regras para mudança de partido, essa é uma suposição improvável.
Como é mais importante que o modelo tenha uma boa performance nos anos mais
recentes, segui a seguinte estratégia \cite{Kuhn2013}:

\begin{enumerate}
\item Treina o modelo com os dados anteriores a 54\textordfeminine{}
legislatura, chamado conjunto de treino, ajustando seus parâmetros a partir
da performance em 60\% dos dados da 54\textordfeminine{} legislatura, chamado
conjunto de validação;
\item Ao finalizar o ajuste dos parâmetros no passo anterior, define qual
modelo teve a melhor performance e treina um novo modelo, usando esses mesmos
parâmetros, nos conjuntos de treino e validação juntos. Isso vai permitir ao
modelo aprender os padrões da 54\textordfeminine{} legislatura;
\item Define o ponto de corte para classificação usando metade dos 40\%
restantes dos dados da 54\textordfeminine{} legislatura, que não foram usados
para validação;
\item Usa o restante dos dados da 54\textordfeminine{} legislatura, chamado
conjunto de teste, para estimar a performance final do modelo.
\end{enumerate}

Assim, os 78.576 dados serão separados em
80.67\%
(63.386) para treino,
11.77\%
(9.251) para validação,
3.68\%
(2.894) para definir o ponto de corte e
3.88\% (3.045) para
teste. Eles possuem, respectivamente,
4.19\%,
3.22\%,
2.7\% e
3.15\% de mudanças de posicionamento.
Aqui percebemos outro problema: as classes dos dados são desbalanceadas, com
96.02\% de todas as observações sendo de
parlamentares que não mudaram de posicionamento no período. Isso pode fazer com
que, ao treinar os modelos nesses dados, eles priorizem a detecção da classe da
maioria a revelia da minoria. Por exemplo, um modelo que simplesmente
classificasse todas observações como não sendo de mudanças de posicionamento
conseguiria 96.02\% de acurácia.  Para
diminuir o impacto desse desbalanceamento, alguns modelos permitem a definição
do custo para cada tipo de erro (falso positivo e falso negativo). Entretanto,
como usaremos modelos que não permitem isso, preferi usar uma técnica mais
simples: o \emph{downsampling}.

No \emph{downsampling}, todas as observações da categoria mais rara (mudanças de
posicionamento) são selecionadas, juntamente com uma amostragem sem repetição,
de tamanho similar, da categoria mais comum. Essa amostra deve manter os padrões
das variáveis independentes do conjunto original. Por definição, o
\emph{downsampling} altera a distribuição real das categorias, por isso ela só
deve ser usada com os dados de treino. Caso fosse usada nos os de validação ou
teste, as estimativas de performance do modelo estariam enviesadas, não
refletindo sua performance em dados reais.

Ao final, das 63.386 observações no conjunto de
treino, 8.73\% (5.531) foram usadas,
sendo 48.06\% de mudanças
de posicionamento. Os conjuntos de validação e teste não foram modificados,
mantendo-se com 9.251 e 3.045 observações
cada sendo, respectivamente,
3.22\% e
3.15\% de mudanças de posicionamento.

\subsection{Modelos}
\label{cap:miolo:modelos}



\citeonline{Wolpert1996} afirma em seu teorema ``No Free Lunch''\footnote{Em
tradução livre, ``não existe almoço grátis''.} que não há uma técnica única de
modelagem que seja melhor em todos casos. Por isso, \citeonline{Kuhn2013}
sugerem testar diversos tipos de modelos antes de definir em qual focar. Nesta
seção, usarei 6 tipos: \gls{GLM}, SVM com kernel
radial, \gls{RF}, \gls{GBM}, C5.0 e \gls{NNET} (Tabela
\ref{table:tipos-de-modelos}). Cada um deles será treinado e validado nos
conjuntos de dados descritos na Seção \ref{cap:desenvolvimento:divisao-dados} usando todas
as permutações dos parâmetros definidos no apêndice
\ref{apendice:parametros-modelos}. Os preditores utilizados serão as variáveis
independentes definidas em \ref{cap:desenvolvimento:variaveis-independentes} e suas
interações\footnote{As interações são definidas como a multiplicação entre cada
permutação das variáveis. Isso permite ao modelo usar preditores mais complexos
como ``fevereiro do terceiro ano da legislatura''.}. O critério de escolha dos
modelos é a \glsfirst{AUC}.

\begin{table}
\centering
\begin{tabular}{l l c}
  Natureza & Sigla & Nome \\
  \hline
  Linear & GLM & \Glsfirst{GLM} \\
  Não-linear & SVM Radial & SVM com kernel radial \\
  Não-linear & RF & \glsfirst{RF}\\
  Não-linear & GBM & \glsfirst{GBM} \\
  Não-linear & C5.0 & C5.0 \\
  Não-linear & NNET & \Glsfirst{NNET} \\
\end{tabular}
\caption{Tipos de modelos preditivos testados.}
\label{table:tipos-de-modelos}
\end{table}

A Tabela \ref{table:resultados-validacao} mostra o conjunto de parâmetros de
cada modelo que obteve o maior \gls{AUC} no conjunto de validação, juntamente com seus
intervalos de confiança em 95\%\footnote{O intervalo de confiança foi
calculado usando 2.000 amostragens com reposição do conjunto de validação,
mantendo as proporções das classes. Essa técnica é chamada de
\emph{bootstraping} estratificado. O número de amostragens foi baseado nos
trabalhos de \citeonline{Carpenter2000} e \citeonline{R:pROC}.}. O que
apresentou o maior \gls{AUC} foi o C5.0, com 0,97
(0,96, 0,98),
contra 0,86
(0,84, 0,87)
do segundo lugar, o de redes neurais. Na Figura \ref{fig:rocs-validation} é
possível visualizar mais facilmente a diferença do \gls{AUC} entre os modelos.

% FIXME: O sigma do SVM Radial não pode ser arredondado
\begin{table}
\centering
\begin{tabular}{l l c c c c}
  Modelo & \multicolumn{2}{c}{Parâmetros} & \multicolumn{3}{c}{AUC} \\ \cline{2-6}
  & \multicolumn{1}{|l}{Nome} & \multicolumn{1}{c|}{Valor} & Mínimo & Mediano & \multicolumn{1}{c|}{Máximo} \\
  \hline
  C5.0 & Tipo & tree & 0,96&0,97&0,98 \\
       & Winnow & FALSE & & & \\
       & Iterações boosting & 30 & & & \\
  NNET & Unidades ocultas & 1 & 0,84&0,86&0,87 \\
       & Decaimento & 0,1 & & & \\
  GBM & Encolhimento & 0,1 & 0,82&0,83&0,85 \\
      & Profundidade máxima & 4 & & & \\
      & Tamanho mínimo das folhas & 10 & & & \\
      & Iterações boosting & 50 & & & \\
  RF & Preditores aleatórios & 2 & 0,74&0,77&0,8 \\
  SVM Radial & Custo & 0,5 & 0,72&0,75&0,78 \\
             & Sigma & 0,14 & & & \\
  GLM & --- & --- & 0,38&0,41&0,43 \\
\end{tabular}
\caption{Lista de parâmetros dos modelos com sua respectiva \glsfirst{AUC}
no conjunto de validação.}
\label{table:resultados-validacao}
\end{table}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/rocs-validation-1} \caption[Área sob a curva ROC (AUC) dos modelos no conjunto de validação]{Área sob a curva ROC (AUC) dos modelos no conjunto de validação.}\label{fig:rocs-validation}
\end{figure}


\end{knitrout}



\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/find-cutoff-1} \caption[Curva ROC do modelo final no conjunto de escolha do ponto de corte]{Curva ROC do modelo final no conjunto de escolha do ponto de corte.}\label{fig:find-cutoff}
\end{figure}


\end{knitrout}

Encontrados o tipo de modelo e seus parâmetros com melhor performance,
treinaremos o modelo final com um novo conjunto de dados composto pela união
dos conjuntos de treino e validação. Como o de validação não é balanceado,
tendo apenas 3.22\%
(298) mudanças de
posicionamento, ele precisa ser \emph{downsampled}. O conjunto final terá
6.314 observações, sendo
46.82\%
(2.956) relativas a
mudanças de posicionamento e
53.18\%
(3.358) não. O último
passo é definir o ponto de corte para a classificação das categorias.

Como explicado na Seção
\ref{cap:fundamentacao:avaliando-modelos-de-classificacao}, a maioria das
ferramentas de aprendizagem de máquina definem como ponto de corte padrão 0,5.
Entretanto, especialmente em casos onde as categorias não estão balanceadas ou
onde o custo de um falso positivo é diferente de um falso negativo, é útil
analisar pontos de corte alternativos. Para este modelo, meu objetivo é
minimizar o número de falsos positivos\footnote{Parlamentares que não mudaram
de posicionamento sendo classificados como se tivessem mudado.}, dado que
96.02\% das observações são de
parlamentares que não mudaram de posicionamento. Considere o seguinte exemplo:

Suponha que em um período estimamos os pontos ideais de 500 parlamentares,
sendo que 95\% (475) não mudaram de posicionamento, e 5\% (25) mudaram. Caso o
modelo tenha uma especificidade de 80\%, então 20\% (95) dos parlamentares que
não mudaram de posicionamento serão classificados erroneamente. Mesmo que esse
modelo tenha 100\% de sensibilidade e classifique corretamente todos os 25
parlamentares que mudaram de posicionamento (o que é improvável), eles estarão
em meio a um conjunto de 120 pessoas, o que pode inviabilizar a análise
individual.



A Figura \ref{fig:find-cutoff} mostra a curva \gls{ROC} do modelo no conjunto de
dados de definição do ponto de corte com dois pontos em destaque: o padrão 0,5
e o escolhido 0,65. Considerando o corte em 0,5, no exemplo
acima 166 parlamentares seriam classificados como
tendo mudado de posicionamento, sendo 87.35\% (145) falsos positivos e
4 falsos negativos. Já com o corte em 0,65,
53 seriam classificados como tendo mudado de
posicionamento, sendo 77.36\% (41) falsos positivos e 13
falsos negativos.  Em outras palavras, ao mudar o ponto de corte de 0,5 para
0,65, estamos trocando 104 falsos
positivos a menos por 9 falsos negativos a mais.
No apêndice \ref{apendice:lista-pontos-de-corte}, há uma tabela com os pontos
de corte, e suas respectivas sensibilidades e especificidades. Eles foram
escolhidos buscando os máximos locais da curva \gls{ROC}



O modelo final alcançou uma \gls{AUC} 0,88
(0,86, 0,91),
como visto na Figura \ref{fig:roc-final-model}. Considerando o ponto de corte
em 0,65, o modelo possui Kappa
0,21 e
52.08\% das mudanças
(sensibilidade) e 91.45\%
das não-mudanças de posicionamento (especificidade) classificadas corretamente.
A Tabela \ref{table:confusion-matrix-final-model} mostra a matriz de confusão
nos dados de teste. De acordo com a classificação de \citeonline{HosmerJr2013}
descrita na Tabela \ref{table:valores-auc}, o modelo possui um poder de
discriminação excelente.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}
\includegraphics[width=\maxwidth]{figure/tmp/roc-final-model-1} \caption[Curva ROC do modelo final nos dados de teste]{Curva ROC do modelo final nos dados de teste.}\label{fig:roc-final-model}
\end{figure}


\end{knitrout}

\begin{table}
\centering
\begin{tabular}{c c c}
  Previsto & \multicolumn{2}{c}{Observado} \\  \cline{2-3}
  & \multicolumn{1}{|c}{Sim} & \multicolumn{1}{c|}{Não} \\
  \hline
  \multicolumn{1}{|c|}{Sim} & 50 & \multicolumn{1}{c|}{252} \\
  \multicolumn{1}{|c|}{Não} & 46 & \multicolumn{1}{c|}{2.697} \\
  \hline
\end{tabular}
\caption{Matriz de confusão do modelo final no conjunto de dados de teste com ponto de corte em 0,65.}
\label{table:confusion-matrix-final-model}
\end{table}

\section{Considerações Finais}

Na primeira parte desta seção, foram apresentadas as etapas seguidas para
coleta e preparação dos dados, descrevendo os parâmetros usados na estimação
dos pontos ideais, e a definição do ``raio de influência'' das mudanças de
posicionamento. Após isso, os dados foram analisados, identificando suas
características e aspectos temporais.

Ao final, o processo de modelagem foi apresentado, com a definição das
variáveis dependente e independentes e divisão da base de dados, e o teste de 6
tipos de modelos preditivos: \gls{GLM}, SVM com kernel radial, \gls{RF},
\gls{GBM}, C5.0 e \gls{NNET}. Com base na \glsfirst{AUC}, o modelo que usou
C5.0 foi escolhido. Após a definição do ponto de corte, ele alcançou um
\gls{AUC} 0,88 no conjunto de teste, tendo um
poder de discriminação excelente de acordo com a classificação de
\citeonline{HosmerJr2013}.

Na próxima seção, apresentarei as conclusões da pesquisa, descrevendo os
resultados obtidos, suas limitações e possíveis trabalhos futuros.

\chapter{Conclusão}\label{cap:conclusao}

Este trabalho propôs uma solução para o problema, causado pelo volume de dados,
da dificuldade em acompanhar mudanças no posicionamento dos deputados federais.
Com o modelo desenvolvido, é possível descobrir quais dos parlamentares têm
maior chance de ter mudado de posicionamento no período, se tornando governo ou
oposição. Assim, cidadãos, jornalistas e cientistas políticos podem otimizar o
uso de seu tempo.

O modelo final, que usou o método C5.0, apresentou resultados excelentes ao ser
validado em um subconjunto dos dados da 54\textordfeminine{} legislatura (Seção
\ref{cap:miolo:modelos}), alcançando uma \glsfirst{AUC} de
0,88. Com o ponto de corte em
0,65, definido a partir da análise da performance do modelo em
um conjunto de dados distinto, foram identificados corretamente
52.08\% dos parlamentares
que mudaram de posicionamento e
91.45\% dos que não
mudaram. Um erro neste trabalho significa que, de acordo com o modelo, o deputado
se comportou como alguém que mudou de posicionamento, mesmo não tendo mudado
até aquele momento, o que pode ser também uma informação relevante.

Na Seção \ref{cap:introducao:problemas-de-pesquisa}, foram definidas duas
perguntas de pesquisa:

\begin{enumerate}
\item \emph{É possível detectar a mudança de posicionamento de um deputado federal,
com ele entrando ou saindo da coalizão governamental, a partir de uma mudança
no seu padrão de votação?}
\item \emph{Os deputados federais mudam seu padrão de votação antes de mudar de
posicionamento?}
\end{enumerate}

Com a performance alcançada pelo modelo, mostramos que é possível detectar
mudanças de posicionamento a partir de mudanças de comportamento. Apesar da
segunda pergunta não ter sido testada diretamente, considero essa performance
como sendo um forte indicador que os deputados federais mudam de comportamento
antes de mudar de posicionamento.

Foi tomado um cuidado redobrado em tornar os resultados dessa pesquisa
facilmente replicáveis com, além da própria dissertação, todos os dados e
códigos-fonte dos programas desenvolvidos sendo disponibilizados na Internet.
Eles foram licenciados livremente, permitindo que sejam usados de qualquer
forma, inclusive comercial, com a única exigência sendo a citação da fonte.
Assim, espero que esses resultados sejam usados na melhoria ou criação de novas
ferramentas de monitoramento legislativo.

\section{Contribuições}

A principal contribuição desse trabalho é a metodologia seguida para o
desenvolvimento de um modelo que detecte as mudanças de posicionamento de
parlamentares. Além de propôr uma divisão de dados que tenta resolver problemas
no treinamento do modelo em dados especialmente desafiadores, por serem
temporais e desbalanceados, descrevo problemas como a definição dos períodos de
análise e o ``raio de influência'' das mudanças de posicionamento, que não
foram definidos em nenhum dos trabalhos encontrados na revisão bibliográfica.

O modelo desenvolvido e os códigos-fonte dos programas escritos para
gerá-lo\footnote{Disponível em
\url{https://github.com/vitorbaptista/dissertacao-mestrado}} são também
contribuições interessantes, especialmente por eles serem licenciados
livremente, permitindo reuso e modificação inclusive com fins comerciais.

Para extrair os dados das votações, foi desenvolvido um programa que,
juntamente com os dados em si, também foi disponibilizado livremente na
Internet\footnote{Disponível em
\url{https://github.com/vitorbaptista/dados-abertos-camara.gov.br}}.

Por fim, na análise dos dados na Seção
\ref{cap:desenvolvimento:aspectos-temporais} foram encontrados padrões
temporais nas mudanças de posicionamento. Esses padrões foram seguidos somente
pelos parlamentares que mudam de posicionamento através da migração partidária,
e não os cujo próprio partido entra ou sai da coalizão. Isso reforça o que já
é sabido na ciência política: migrações partidárias possuem aspectos temporais.

\section{Limitações}
\label{cap:conclusao:limitacoes}

Alguns problemas na modelagem não puderam ser solucionados por exigirem uma
análise mais aprofundada e não serem o foco do trabalho. Eles serão descritos
nesta seção.

\subsection{Períodos de análise}

Na Seção \ref{cap:desenvolvimento:periodos-de-analise}, defini arbitrariamente
os períodos de análise como sendo de 12 meses divididos em dois subperíodos de
mesma duração. Uma forma melhor de defini-los seria buscando o menor período
que contenha parlamentares e votações suficientes para, de acordo com os
critérios definidos, estimar os pontos ideais.

\subsection{Critérios de inclusão de parlamentares e votações}

Neste trabalho, segui os critérios de inclusão padrão do W-NOMINATE, definido
como ao menos 20 votações cuja maioria foi responsável por, no máximo, 97,5\%
dos votos. Manter os mesmos critérios é importante em análises para permitir
que os resultados sejam comparáveis com outros trabalhos. Como o objetivo do
modelo não é a análise, é possível que critérios mais (ou menos) restritivos
possam aumentar sua performance. Uma forma de definir esses critérios é
comparar a performance de modelos treinados com os pontos ideais calculados
usando critérios distintos.

\subsection{Raio de influência da mudança de posicionamento}

Uma das hipóteses básicas desse trabalho é que os parlamentares mudam de
comportamento antes de mudarem oficialmente de posicionamento, permitindo assim
a previsão de um a partir do outro. Baseado nisso, foi preciso definir em
quanto tempo antes de oficializada a mudança de posicionamento o parlamentar
mudava de comportamento. Neste trabalho, esse período foi definido
arbitrariamente como sendo 6 meses.

Uma forma de encontrar o ``raio de influência'' real é buscando o dia em que os
pontos ideais nos períodos antes e depois dele estão mais distantes. É provável
que esse valor varie bastante dependendo do parlamentar e do momento, o que
seria um complicador. Nesse caso, poderia se buscar o valor mais comum.

\subsection{Número de repetições para estimar o erro}

Para estimar o erro dos pontos ideais, \citeonline{Poole2005} sugere repetir
seu cálculo 101 vezes. Como explicado na Seção
\ref{cap:miolo:estimativas-de-erro}, esse número se provou impraticável com o
volume de dados e capacidade de processamento disponível. Por isso, neste
trabalho o erro foi calculado usando 10 repetições.

Esse número foi arbitrário. É possível que a performance do modelo aumente com
mais repetições. Para descobrir isso, seria preciso gerar as estimativas de
erro com diversos números de repetições (inclusive zero) e encontrar o que gera
um modelo com maior performance.

\section{Trabalhos futuros}

Pela pesquisa bibliográfica realizada, o uso de técnicas da ciência de dados
para detectar mudanças de posicionamento dos parlamentares é uma área
relativamente inexplorada. Dessa forma, existem diversos trabalhos possíveis.

Além da resolução das limitações apresentadas na Seção
\ref{cap:conclusao:limitacoes}, o processo de modelagem descrito nesta
dissertação poderia ser replicado em outra casa legislativa, como o Senado
Federal ou casas de outras esferas. Inclusive, seria interessante testar se os
indicadores de mudanças de posicionamento sejam parecidos em casas distintas,
analisando a performance de um modelo treinado com os dados de uma casa nos
dados de outra. É possível que um modelo único treinado com os dados de
diversas casas legislativas apresente uma performance superior do que
um treinado somente com os dados de cada casa.

O W-NOMINATE foi escolhido por ser um dos métodos mais usados e existirem
implementações gratuitas disponíveis. Entretanto, é possível que o uso de outro
método gere melhores resultados. Podem ser gerados modelos que usem mais de um
método ao mesmo tempo, deixando a tarefa de descobrir qual é o mais
significativo para o próprio modelo.

Neste trabalho, focamos no comportamento do parlamentar individualmente, mas é
trivial expandir o modelo para detectar mudanças no posicionamento dos
partidos. Para isso, basta analisar o partido dos deputados que têm uma maior
probabilidade de ter mudado de posicionamento. Um percentual grande de
parlamentares de um mesmo partido terem sido detectado pode ser um indicador de
uma mudança organizada. Essa análise pode ser expandida não só para os
partidos, mas também para grupos intrapartidários como as bancadas.

Apesar dos códigos-fonte de todos os programas desenvolvidos estarem
disponíveis, seu uso exige conhecimentos de computação. Integrar o modelo a
ferramentas como o Basômetro ou o Radar Parlamentar são trabalhos essenciais
para que os benefícios deste trabalho sejam aproveitados por mais pessoas.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% BIbliografia
%% Coloque suas referencias no arquivo ref.bib

\bibliographystyle{abnt-alf} % estilo de bibliografia   plain,unsrt,alpha,abbrv.
\bibliography{ref} % arquivos com as entradas bib.

%Faz aparecer a referencia bibliografica no indice
\addcontentsline{toc}{section}{\numberline{}Referências Bibliográficas}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Apendice
% Caso seja necessario algum apendice

\appendix
\input{apendice-tabela-coalizoes}

% FIXME: Preciso melhorar essa tabela
\chapter{Parâmetros dos modelos}
\label{apendice:parametros-modelos}



\begin{longtable}{l l l}
\centering
  Modelo & Parâmetro & Valores \\
  \hline
  % C5.0
  C5.0 & Tipo & rules, tree \\
   & Winnow & FALSE, TRUE \\
   & Iterações boosting & 1, 10, 20, 30, 40, 50, 60, 70, \\
 &  & 80, 90, 100 \\
  % NNET
  NNET & Unidades Ocultas & 1, 3, 5, 7, 9, 11, 13, 15, 17, \\
 &  & 19, 21, 23, 25, 27, 29, 31, 33, \\
 &  & 35, 37, 39 \\
   & Decaimento & 0, 1e-04, 0,00015, 0,00022, \\
 &  & 0,00032, 0,00046, 0,00068, \\
 &  & 0,001, 0,0015, 0,0022, 0,0032, \\
 &  & 0,0046, 0,0068, 0,01, 0,015, \\
 &  & 0,022, 0,032, 0,046, 0,068, 0,1 \\
  % GBM
  GBM & Encolhimento & 0,1 \\
   & Profundidade máxima & 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, \\
 &  & 11, 12, 13, 14, 15, 16, 17, 18, \\
 &  & 19, 20 \\
   & Tamanho mínimo das folhas & 10 \\
   & Iterações boosting & 50, 100, 150, 200, 250, 300, \\
 &  & 350, 400, 450, 500, 550, 600, \\
 &  & 650, 700, 750, 800, 850, 900, \\
 &  & 950, 1.000 \\
  % RF
  RF & Preditores aleatórios & 2, 3, 5, 6, 9, 13, 17, 24, 33, \\
 &  & 45, 62, 85, 117, 160, 219, 299, \\
 &  & 410, 560, 766 \\
  % SVM Radial
  SVM Radial & Custo & 0,25, 0,5, 1, 2, 4, 8, 16, 32, \\
 &  & 64, 128, 256, 512, 1.024, 2.048, \\
 &  & 4.096, 8.192, 16.384, 32.768, \\
 &  & 65.536, 131.072 \\
   & Sigma & 0,14 \\
  GLM & --- & --- \\
\caption{Lista dos parâmetros usados no treinamento dos modelos. Em modelos com
mais de um parâmetro, foram testadas todas suas permutações.}
\end{longtable}

\chapter{Pontos de corte do modelo final}
\label{apendice:lista-pontos-de-corte}



\begin{longtable}{l l l l l l l}
\centering
  Threshold & \multicolumn{3}{c}{Especificidade} & \multicolumn{3}{c}{Sensibilidade} \\ \cline{2-7}
            & \multicolumn{1}{|l}{Mínimo} & Mediano & Máximo & \multicolumn{1}{|l}{Mínimo} & Mediano & \multicolumn{1}{l|}{Máximo} \\
  \hline
  0.079 & 24.47\% & 26.1\% & 27.77\% & 100\% & 100\% & 100\% \\
0.108 & 27.31\% & 29.01\% & 30.72\% & 96.15\% & 98.72\% & 100\% \\
0.154 & 31.11\% & 32.81\% & 34.59\% & 93.59\% & 97.44\% & 100\% \\
0.307 & 44.82\% & 46.66\% & 48.54\% & 91.03\% & 96.15\% & 100\% \\
0.402 & 55.5\% & 57.35\% & 59.16\% & 89.74\% & 94.87\% & 98.72\% \\
0.432 & 59.34\% & 61.12\% & 62.96\% & 87.18\% & 93.59\% & 98.72\% \\
0.433 & 59.41\% & 61.19\% & 63.03\% & 85.9\% & 92.31\% & 97.44\% \\
0.477 & 63.42\% & 65.06\% & 66.94\% & 84.62\% & 91.03\% & 97.44\% \\
0.481 & 63.71\% & 65.38\% & 67.22\% & 82.05\% & 89.74\% & 96.15\% \\
0.482 & 63.78\% & 65.45\% & 67.29\% & 80.77\% & 88.46\% & 94.87\% \\
0.494 & 66.69\% & 68.41\% & 70.17\% & 79.49\% & 87.18\% & 94.87\% \\
0.495 & 67.08\% & 68.82\% & 70.56\% & 78.21\% & 85.9\% & 93.59\% \\
0.523 & 69.53\% & 71.2\% & 72.94\% & 76.92\% & 84.62\% & 92.31\% \\
0.528 & 70.74\% & 72.37\% & 74.04\% & 74.36\% & 83.33\% & 91.03\% \\
0.53 & 71.84\% & 73.54\% & 75.14\% & 73.08\% & 82.05\% & 91.03\% \\
0.533 & 73.44\% & 75.07\% & 76.63\% & 71.79\% & 80.77\% & 89.74\% \\
0.558 & 75.46\% & 77.02\% & 78.55\% & 70.51\% & 79.49\% & 88.46\% \\
0.567 & 76.7\% & 78.23\% & 79.69\% & 69.23\% & 78.21\% & 87.18\% \\
0.573 & 78.16\% & 79.65\% & 81.11\% & 67.95\% & 76.92\% & 85.9\% \\
0.573 & 78.2\% & 79.69\% & 81.14\% & 65.38\% & 75.64\% & 84.62\% \\
0.574 & 78.34\% & 79.83\% & 81.29\% & 64.1\% & 74.36\% & 83.33\% \\
0.583 & 80.18\% & 81.61\% & 82.99\% & 64.07\% & 73.08\% & 83.33\% \\
0.602 & 81\% & 82.39\% & 83.77\% & 61.54\% & 71.79\% & 82.05\% \\
0.603 & 81.36\% & 82.71\% & 84.06\% & 60.26\% & 70.51\% & 80.77\% \\
0.605 & 81.68\% & 83.06\% & 84.34\% & 58.97\% & 69.23\% & 79.49\% \\
0.607 & 82.32\% & 83.66\% & 84.98\% & 57.69\% & 67.95\% & 78.21\% \\
0.61 & 83.35\% & 84.71\% & 85.9\% & 56.41\% & 66.67\% & 76.92\% \\
0.613 & 83.91\% & 85.23\% & 86.47\% & 55.13\% & 65.38\% & 76.92\% \\
0.613 & 84.91\% & 86.22\% & 87.46\% & 46.15\% & 56.41\% & 67.95\% \\
0.614 & 85.72\% & 87\% & 88.21\% & 44.87\% & 55.13\% & 66.67\% \\
0.617 & 86.33\% & 87.61\% & 88.78\% & 42.31\% & 53.85\% & 65.38\% \\
0.617 & 87.07\% & 88.32\% & 89.45\% & 41.03\% & 52.56\% & 64.1\% \\
0.62 & 88.46\% & 89.7\% & 90.7\% & 39.74\% & 51.28\% & 62.82\% \\
0.621 & 88.67\% & 89.84\% & 90.87\% & 38.46\% & 50\% & 61.54\% \\
0.625 & 89.6\% & 90.7\% & 91.69\% & 35.9\% & 47.44\% & 58.97\% \\
0.648 & 90.27\% & 91.34\% & 92.33\% & 34.62\% & 46.15\% & 57.69\% \\
0.649 & 90.41\% & 91.44\% & 92.44\% & 33.33\% & 44.87\% & 56.41\% \\
0.649 & 91.65\% & 92.65\% & 93.57\% & 26.92\% & 38.46\% & 50\% \\
0.65 & 92.22\% & 93.18\% & 94.07\% & 26.92\% & 37.18\% & 48.72\% \\
0.651 & 92.37\% & 93.32\% & 94.18\% & 25.64\% & 35.9\% & 47.44\% \\
0.651 & 93.36\% & 94.21\% & 95.03\% & 23.08\% & 33.33\% & 43.59\% \\
0.652 & 93.54\% & 94.39\% & 95.17\% & 21.79\% & 32.05\% & 42.31\% \\
0.653 & 94\% & 94.89\% & 95.63\% & 20.51\% & 30.77\% & 41.03\% \\
0.654 & 94.32\% & 95.17\% & 95.92\% & 16.67\% & 26.92\% & 37.18\% \\
0.657 & 96.45\% & 97.12\% & 97.73\% & 16.67\% & 25.64\% & 35.9\% \\
0.657 & 96.59\% & 97.23\% & 97.8\% & 15.38\% & 24.36\% & 34.62\% \\
0.657 & 96.91\% & 97.5\% & 98.01\% & 11.54\% & 20.51\% & 29.49\% \\
0.66 & 97.76\% & 98.26\% & 98.72\% & 10.26\% & 17.95\% & 26.92\% \\
0.662 & 97.8\% & 98.3\% & 98.76\% & 8.97\% & 16.67\% & 25.64\% \\
0.668 & 97.9\% & 98.37\% & 98.79\% & 7.69\% & 15.38\% & 24.36\% \\
0.687 & 98.33\% & 98.76\% & 99.15\% & 6.38\% & 12.82\% & 20.51\% \\
0.689 & 98.62\% & 99.01\% & 99.36\% & 5.13\% & 11.54\% & 19.23\% \\
0.699 & 98.97\% & 99.29\% & 99.57\% & 2.56\% & 7.69\% & 14.1\% \\
0.702 & 99.01\% & 99.33\% & 99.61\% & 1.28\% & 6.41\% & 12.82\% \\
0.725 & 99.22\% & 99.5\% & 99.75\% & 1.28\% & 5.13\% & 10.26\% \\
0.73 & 99.29\% & 99.54\% & 99.79\% & 0\% & 1.28\% & 3.85\% \\
0.75 & 99.33\% & 99.57\% & 99.82\% & 0\% & 0\% & 0\% \\
0.758 & 99.36\% & 99.61\% & 99.82\% & 0\% & 0\% & 0\% \\
0.766 & 99.47\% & 99.68\% & 99.86\% & 0\% & 0\% & 0\% \\
0.77 & 99.5\% & 99.72\% & 99.89\% & 0\% & 0\% & 0\% \\
0.779 & 99.54\% & 99.75\% & 99.93\% & 0\% & 0\% & 0\% \\
0.792 & 99.61\% & 99.79\% & 99.93\% & 0\% & 0\% & 0\% \\
0.798 & 99.64\% & 99.82\% & 99.96\% & 0\% & 0\% & 0\% \\
0.816 & 99.72\% & 99.86\% & 99.96\% & 0\% & 0\% & 0\% \\
0.84 & 99.75\% & 99.89\% & 100\% & 0\% & 0\% & 0\% \\
0.887 & 99.82\% & 99.93\% & 100\% & 0\% & 0\% & 0\% \\
0.953 & 99.89\% & 99.96\% & 100\% & 0\% & 0\% & 0\% \\
Inf & 100\% & 100\% & 100\% & 0\% & 0\% & 0\% \\
\caption{Especificidade e sensibilidade em diversos pontos de corte do modelo
final usando o conjunto de dados para definição do ponto de corte.}
\end{longtable}

\chapter{Versões dos softwares utilizados}

\begin{kframe}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in system(paste(which, shQuote(names[i])), intern = TRUE, ignore.stderr = TRUE): cannot popen '/usr/bin/which 'uname' 2>/dev/null', probable reason 'Cannot allocate memory'}}\end{kframe}

%\input{apendice-b}
%\input{apendice-c}
%\input{apendice-d}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
